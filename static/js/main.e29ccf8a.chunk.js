(this["webpackJsonplove-the-args"]=this["webpackJsonplove-the-args"]||[]).push([[0],{105:function(e,t,n){},114:function(e,t,n){},120:function(e,t,n){},226:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(26),r=n.n(o),a=(n(114),n(3)),i=(n(120),n(11)),s=(n(62),n(0)),l="group-menu";function d(){var e=document.getElementsByClassName("selected"),t=e.length,n=!1,c=!1;return t>0&&(n=e[0].id,c=e[t-1].id),{start:n,end:c,selectionSize:t}}function u(){var e=Object(a.b)();return Object(s.jsxs)(i.a,{id:l,className:"context-menu",hideOnLeave:!0,children:[Object(s.jsx)(i.c,{onClick:function(){var t=d(),n=t.start,c=t.end,o=t.selectionSize;n&&c&&e({type:"groupIds",payload:{start:n,end:c,selectionSize:o}})},children:"Group"}),Object(s.jsx)(i.c,{onClick:function(){var t=d(),n=t.start,c=t.end;t.selectionSize;n&&c&&e({type:"ungroupIds",payload:{start:n,end:c}})},children:"UnGroup"})]})}var b={"\u05de\u05e7\u05e8\u05d4":{color:"#222255",types:["link","box"]},"\u05d3\u05d9\u05df":{color:"#222255",types:["link","box"]},"\u05d8\u05e2\u05dd":{color:"#222255",types:["link"]},"\u05db\u05d5\u05ea\u05e8\u05ea":{color:"#222255",types:["link","box"]},"\u05de\u05e2\u05e9\u05d4":{color:"#222255",types:["link","box"]},"\u05db\u05dc\u05dc":{color:"#222255",types:["link","box"]},"\u05d0\u05de\u05d9\u05e8\u05d4":{color:"#ee6677",types:["link","box"]},"\u05e9\u05d0\u05dc\u05d4":{color:"#ee6677",types:["link","box"]},"\u05ea\u05e9\u05d5\u05d1\u05d4":{color:"#ee6677",types:["link"]},"\u05e7\u05d5\u05e9\u05d9\u05d0":{color:"#ee6677",types:["link"]},"\u05ea\u05d9\u05e8\u05d5\u05e5":{color:"#ee6677",types:["link"]},"\u05e8\u05d0\u05d9\u05d4":{color:"#ee6677",types:["link"]},"\u05e1\u05d9\u05d5\u05e2":{color:"#ee6677",types:["link"]},"\u05d0\u05d2\u05d3\u05ea\u05d0":{color:"#ee6677",types:["link","box"]},"\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0":{color:"#ee6677",types:["link"]},"\u05de\u05d7\u05dc\u05d5\u05e7\u05ea":{color:"#ee6677",types:["link","box"]},"\u05de\u05d3\u05e8\u05e9 \u05d4\u05dc\u05db\u05d4":{color:"#222255",types:["link","box"]},"\u05de\u05e9\u05e0\u05d4":{color:"#ee6677",types:["box"]},"\u05de\u05ea\u05e0\u05d9":{color:"#222255",types:["link","box"]},"\u05e4\u05d9\u05e1\u05e7\u05d0":{color:"#222255",types:["link","box"]}},j={Tannaitic:["\u05de\u05e7\u05e8\u05d4","\u05d3\u05d9\u05df","\u05d8\u05e2\u05dd","\u05db\u05d5\u05ea\u05e8\u05ea","\u05de\u05e2\u05e9\u05d4","\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0","\u05db\u05dc\u05dc","\u05de\u05d3\u05e8\u05e9 \u05d4\u05dc\u05db\u05d4","\u05de\u05ea\u05e0\u05d9","\u05e4\u05d9\u05e1\u05e7\u05d0"],Talmud:["\u05d0\u05de\u05d9\u05e8\u05d4","\u05e9\u05d0\u05dc\u05d4","\u05ea\u05e9\u05d5\u05d1\u05d4","\u05e7\u05d5\u05e9\u05d9\u05d0","\u05ea\u05d9\u05e8\u05d5\u05e5","\u05e8\u05d0\u05d9\u05d4","\u05e1\u05d9\u05d5\u05e2","\u05d0\u05d2\u05d3\u05ea\u05d0","\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0","\u05de\u05d7\u05dc\u05d5\u05e7\u05ea","\u05de\u05e9\u05e0\u05d4"]},p="node_menu",O="remove_box_menu_id";function f(){var e=function(e,t,n){t.target;var c=t.label,o=t.type,r=t.dispatch,a=n.firstChild.id;r("link"===o?{type:"setMode",payload:{label:c,id:a}}:{type:"addBox",payload:{label:c,id:a}})},t=Object(a.b)();return Object(s.jsx)(i.a,{id:p,className:"context-menu",hideOnLeave:!0,children:Object.keys(j).map((function(n){return Object(s.jsx)(i.d,{title:n,children:j[n].map((function(n){return Object(s.jsx)(i.d,{title:n,children:b[n].types.map((function(c){return Object(s.jsx)(i.c,{onClick:e,data:{label:n,type:c,dispatch:t},children:c},c)}))},n)}))},n)}))})}function h(){var e=Object(a.b)();return Object(s.jsx)(i.a,{id:O,className:"context-menu",hideOnLeave:!0,children:Object(s.jsx)(i.c,{onClick:function(e,t,n){t.target;var c=t.dispatch,o=n.firstChild.getAttribute("nodelabel");c({type:"removeBox",payload:{id:n.firstChild.getAttribute("nodeid"),label:o}})},data:{dispatch:e},children:"Remove Box"},"remove")})}var g="connection_menu";function y(){var e=Object(a.b)();return Object(s.jsx)(i.a,{id:g,children:Object(s.jsx)(i.c,{onClick:function(e,t,n){var c=t.target,o=t.reducerType;(0,t.dispatch)({type:o,payload:{id:c.parentElement.parentElement.id}})},data:{reducerType:"deleteConnection",dispatch:e},children:"Delete"},"deleteConnection")})}function x(e){return e!==document&&(e.classList.contains("react-contextmenu-item")||e.classList.contains("node")?e:x(e.parentNode))}function m(e,t,n){var c=x(e.target);!1===c?n({type:"resetMode"}):"react-contextmenu-item"===c.classList[0]||"node"===c.classList[0]&&(null!==t.selectedNode&&(t.selectedNode===c.id||t.connections.includes([t.selectedNode,c.id])||n({type:"addConnection",payload:{connection:[t.selectedNode,c.id,t.mode]}})),n({type:"resetMode"}))}function v(){var e=Object(a.c)((function(e){return e.blocks.present.graph})),t=Object(a.b)();return Object(c.useEffect)((function(){function n(n){return m(n,e,t)}return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[e]),Object(s.jsx)(s.Fragment,{})}var k=n(29),S=n(28),C=n.n(S),A=n(109),N=n(107),E=n.n(N),M=(n(51),n(108)),T=n.n(M);function w(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.notes[t]})),c=Object(a.c)((function(e){return e.blocks.present.views[t]})),o=Object(a.b)();return!1===c||void 0===c?Object(s.jsx)("div",{}):Object(s.jsx)(E.a,{id:t,className:"note",onSelect:function(){return o({type:"updateNote",payload:{id:t}})},onChange:function(){return o({type:"updateNote",payload:{id:t}})},onClick:function(e){if(e.ctrlKey||e.metaKey||e.shiftKey)return 0;o({type:"updateNote",payload:{id:t}})},value:n})}function R(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.views[t]})),c=Object(a.b)();return Object(s.jsx)(T.a,{checked:n,onChange:function(){return c({type:"toggleNote",payload:{id:t}})},uncheckedIcon:!1,checkedIcon:!1,className:"switch",onColor:"#222255",onHandleColor:"#ffffff",offColor:"#888888",boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 1px rgba(0, 0, 0, 0.2)",height:10,width:20})}var B=n(5);function I(e){var t=e.getSelection().getAnchorOffset(),n=e.getCurrentContent().getPlainText().length,c=e.getSelection().getAnchorKey(),o=e.getCurrentContent().getLastBlock().key,r=e.getCurrentContent().getFirstBlock().key,a=B.SelectionState.createEmpty("blockkey").merge({anchorKey:c,anchorOffset:t,focusOffset:n,focusKey:o}),i=B.SelectionState.createEmpty("blockkey").merge({anchorKey:r,anchorOffset:0,focusKey:c,focusOffset:t}),s=B.Modifier.removeRange(e.getCurrentContent(),i,"forward"),l=B.Modifier.removeRange(e.getCurrentContent(),a,"forward");return{slice1:JSON.stringify(Object(B.convertToRaw)(l)),slice2:JSON.stringify(Object(B.convertToRaw)(s))}}function L(e){var t=e.getSelection();return{anchorKey:t.getAnchorKey(),anchorOffset:t.getAnchorOffset(),focusKey:t.getFocusKey(),focusOffset:t.getFocusOffset(),isBackward:t.isBackward}}function _(e){var t=e.anchorKey,n=e.anchorOffset,c=e.focusKey,o=e.focusOffset,r=e.isBackward;return B.SelectionState.createEmpty("blockkey").merge({anchorKey:t,anchorOffset:n,focusKey:c,focusOffset:o,isBackward:r})}var D={TANNA:{backgroundColor:"#BBCCEE"},AMORA:{backgroundColor:"#ccddaa"},STAM:{backgroundColor:"#ffcccc"},AMORA_MIDRASH:{backgroundColor:"#BBCCEE",borderBottom:".2em solid #228833"},STAM_MIDRASH:{backgroundColor:"#BBCCEE",borderBottom:".2em solid #ee6677"},STAM_AMORA:{backgroundColor:"#ccddaa",borderBottom:".2em solid #ee6677"},TANAKH:{fontWeight:"bold"},CLEAR:{color:"black"}};function K(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.txts[t]})),o=Object(a.b)(),r=Object(a.c)((function(e){return e.blocks.present.selections[t]})),i=B.EditorState.createWithContent(Object(B.convertFromRaw)(JSON.parse(n))),l=null;l=null==r?B.SelectionState.createEmpty():_(r);var d=B.EditorState.forceSelection(i,l),u=Object(c.useState)((function(){return B.EditorState.forceSelection(i,l)})),b=Object(k.a)(u,2),j=b[0],p=b[1];n!==JSON.stringify(Object(B.convertToRaw)(j.getCurrentContent()))&&p(d);var O=Object(a.c)((function(e){return e.blocks.present.activeId})),f=Object(c.useRef)();return Object(c.useEffect)((function(){O===t&&f.current.focus()})),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"text-editor",id:t,onBlur:function(){return o({type:"updateId",payload:{id:null}})},children:Object(s.jsx)(B.Editor,{ref:f,customStyleMap:D,editorState:j,onChange:function(e){var n=e.getCurrentContent().getPlainText()===j.getCurrentContent().getPlainText();p(e),o(n?{type:"updateSelection",payload:{id:t,split:I(e),selection:L(e)}}:{type:"updateText",payload:{id:t,txt:JSON.stringify(Object(B.convertToRaw)(e.getCurrentContent())),split:I(e),selection:L(e)}})}})})})}function F(){var e=Object(a.c)((function(e){return e.blocks.present.order})),t=Object(c.useState)(new Set),n=Object(k.a)(t,2),o=(n[0],n[1],e.map((function(e){return Object(s.jsxs)("div",{className:"block",children:[Object(s.jsx)(K,{id:e}),Object(s.jsx)(R,{id:e}),Object(s.jsx)(w,{id:e})]},e)})));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.b,{id:l,holdToDisplay:-1,children:Object(s.jsx)(C.a,{handle:"#drag-bar-blocks",bounds:{top:0},children:Object(s.jsxs)("div",{id:"blocks",children:[Object(s.jsx)("div",{id:"drag-bar-blocks"}),Object(s.jsx)("div",{id:"blocks-selecting-area",children:o})]})})}),Object(s.jsx)(A.a,{dragContainer:"#blocks-selecting-area",selectableTargets:[".text-editor"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"shift",hitRate:5,onSelect:function(e){e.added.forEach((function(e){e.classList.add("selected"),e.style.backgroundColor="lightgrey"})),e.removed.forEach((function(e){e.classList.remove("selected"),e.style.backgroundColor="white"}))}})]})}n(226);var J=n(30),P=n.n(J);n(229);function H(){return Object(s.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},id:"node-font-field",children:["\u2b1b \ud83d\udd0e",Object(s.jsx)("input",{id:"node-font-field-input",type:"text",maxLength:"3",size:"1",defaultValue:"100",onChange:function(e){var t=e.target.value;t=!Number.isNaN(t)&&parseInt(t)?parseInt(t):100,document.getElementById("canvas").style.zoom="".concat(t,"%"),document.getElementById("links").style.zoom="".concat(t,"%")}})]})}function W(){return Object(s.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},id:"node-font-field",children:[Object(s.jsx)("input",{id:"node-font-field-input",type:"text",maxLength:"3",size:"1",defaultValue:"100",onChange:function(e){var t=e.target.value;t=!Number.isNaN(t)&&parseInt(t)?parseInt(t):100;var n=document.getElementById("blocks-selecting-area");n.style.zoom="".concat(t,"%"),n.scrollLeft=n.scrollWidth-n.clientWidth}}),"\ud83d\udd0d\u05d0\u05d1"]})}var z=function(e,t){var n=e.getCurrentContent(),c=t.reduce((function(t,n){return B.Modifier.removeInlineStyle(t,e.getSelection(),n)}),n);return B.EditorState.push(e,c,"change-inline-style")},U=["TANNA","AMORA","AMORA_MIDRASH","STAM","STAM_MIDRASH","STAM_AMORA","CLEAR","TANAKH","BOLD"],G=["TANNA","AMORA","AMORA_MIDRASH","STAM","STAM_MIDRASH","STAM_AMORA","CLEAR"];function V(){var e=Object(a.b)();return Object(s.jsx)("button",{type:"button",onMouseDown:function(t){if(t.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var n=document.activeElement.parentElement.parentElement.parentElement.id;e({type:"mergeText",payload:{id:n}})}},children:"merge"})}function X(){var e=Object(a.b)();return Object(s.jsx)("button",{type:"button",onMouseDown:function(t){if(t.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var n=document.activeElement.parentElement.parentElement.parentElement.id;e({type:"splitText",payload:{id:n}})}},children:"split"})}function Y(){var e=Object(a.b)();return Object(s.jsx)("button",{type:"button",onClick:function(){return e(J.ActionCreators.redo())},children:"redo"})}function q(){var e=Object(a.b)();return Object(s.jsx)("button",{type:"button",onClick:function(){e(J.ActionCreators.undo())},children:"undo"})}function Q(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.blocks.present.txts})),c=Object(a.c)((function(e){return e.blocks.present.selections}));return Object(s.jsx)("button",{className:"historical-layer-button",style:D[e.dataStyle],type:"button","data-style":e.dataStyle,onMouseUp:function(e){return e.preventDefault()},onMouseDown:function(o){if(o.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var r=o.currentTarget.getAttribute("data-style"),a=document.activeElement.parentElement.parentElement.parentElement.id,i=Object(B.convertFromRaw)(JSON.parse(n[a])),s=_(c[a]),l=B.EditorState.createWithContent(i);l=B.EditorState.acceptSelection(l,s);var d=JSON.stringify(l.getCurrentContent().getBlockMap());if(e.clearer?l=z(l,U):e.layerable||(l=function(e){return z(e,G)}(l)),l=B.RichUtils.toggleInlineStyle(l,r),d!=JSON.stringify(l.getCurrentContent().getBlockMap())){var u=I(l),b=l.getCurrentContent().getFirstBlock().getKey();s=_({anchorKey:b,anchorOffset:0,focusKey:b,focusOffset:0,isBackward:!1}),l=B.EditorState.forceSelection(l,s),t({type:"updateText",payload:{id:a,txt:JSON.stringify(Object(B.convertToRaw)(l.getCurrentContent())),split:u,selection:L(l)}})}}},children:e.name})}function Z(){return Object(s.jsxs)("div",{className:"header_buttons",children:[Object(s.jsxs)("div",{id:"command-buttons",children:[Object(s.jsx)(H,{}),Object(s.jsx)(q,{}),Object(s.jsx)(Y,{}),Object(s.jsx)(V,{}),Object(s.jsx)(X,{}),Object(s.jsx)(W,{})]}),Object(s.jsxs)("div",{id:"historical-layer-buttons",children:[Object(s.jsx)(Q,{dataStyle:"TANNA",name:"Tannaitic"}),Object(s.jsx)(Q,{dataStyle:"AMORA",name:"Amoraic"}),Object(s.jsx)(Q,{dataStyle:"STAM",name:"Stam"}),Object(s.jsx)(Q,{dataStyle:"AMORA_MIDRASH",name:"T from A"}),Object(s.jsx)(Q,{dataStyle:"STAM_MIDRASH",name:"T from S"}),Object(s.jsx)(Q,{dataStyle:"STAM_AMORA",name:"A from S"}),Object(s.jsx)(Q,{dataStyle:"TANAKH",name:"Tanakh",layerable:!0}),Object(s.jsx)(Q,{dataStyle:"CLEAR",name:"Clear",clearer:!0})]})]})}n(230);var $=n(13);function ee(e){var t=e.boxLabels,n=e.connectionLabels,c="",o=[];if(t&&n)o=t.concat(n);else if(t)o=t;else{if(!n)return c;o=n}return o.forEach((function(e){c=b[e].color})),c}function te(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.graph.boxes[t]})),c=Object(a.c)((function(e){return e.blocks.present.graph.connections})).filter((function(e){return e[0]===t})).map((function(e){return e[2]})),o=ee({boxLabels:n,connectionLabels:c});return Object(s.jsxs)("legend",{className:"legend",style:{color:o},children:[Object(s.jsx)(ce,{connectionLabels:c,id:t}),Object(s.jsx)(ne,{boxLabels:n,id:t})]})}function ne(e){var t=e.boxLabels,n=e.id,c=Object(s.jsx)(s.Fragment,{});return Array.isArray(t)?(c=t.map((function(e){return Object(s.jsx)("div",{className:"box-label",nodeid:n,children:Object(s.jsx)(i.b,{id:O,holdToDisplay:-1,label:e,children:Object(s.jsx)("div",{nodeid:n,nodelabel:e,children:" \u2b1b ".concat(e)})},n+e)},n+e)})),Object(s.jsx)("div",{className:"box-legend",children:c})):null}function ce(e){var t=e.connectionLabels,n=e.id,c="";return t?(c=t.map((function(e){return Object(s.jsx)("div",{className:"arrow-label",nodeid:n,children:" \u25c0\ufe0f ".concat(e)},n+e)})),Object(s.jsx)("div",{className:"arrow-legend",children:c})):null}n(105);function oe(){return Object(a.c)((function(e){return e.blocks.present.order})).map((function(e){return Object(s.jsx)(re,{id:e},e)}))}function re(e){var t=e.id,n=Object(a.b)(),c=Object(a.c)((function(e){return e.blocks.present.positions[t]})),o=Object(a.c)((function(e){return e.blocks.present.txts[t]})),r=Object(a.c)((function(e){return e.blocks.present.graph.selectedNode})),l=Object(a.c)((function(e){return e.blocks.present.graph.boxes[t]})),d=Object(a.c)((function(e){return e.blocks.present.graph.connections.filter((function(e){return e[0]===t})).map((function(e){return e[2]}))})),u={};u=r===t?{backgroundColor:"gold"}:{borderColor:ee({boxLabels:l,connectionLabels:d})};var b=function(e,c){n({type:"updatePosition",payload:{id:t,x:c.lastX+c.deltaX,y:c.lastY+c.deltaY}})},j=c[0],O=c[1];return Object(s.jsx)(i.b,{id:p,holdToDisplay:-1,children:Object(s.jsx)(C.a,{onStop:b,onDrag:b,defaultPosition:{x:j,y:O},bounds:{left:0,top:0},children:Object(s.jsxs)("fieldset",{className:"node single-node",id:t,style:u,children:[Object(s.jsx)(te,{id:t}),Object(s.jsx)(B.Editor,{readOnly:!0,customStyleMap:D,editorState:B.EditorState.createWithContent(Object(B.convertFromRaw)(JSON.parse(o))),onChange:function(){}})]})},t)},t)}var ae=n(49),ie=n.n(ae);function se(){for(var e=Object(a.c)((function(e){return e.blocks.present.order})),t=(Object(a.c)((function(e){return e.blocks.present.positions})),Object(a.c)((function(e){return e.blocks.present.groups})),{}),n=0;n<e.length-1;n+=1)t[e[n]]=e[n+1];var c=[];return Object.keys(t).forEach((function(e){var n=e,o=t[e];c.push(Object(s.jsx)(ie.a,{id:n+o,start:n,end:o,strokeWidth:1,lineColor:"grey",headColor:"grey",dashness:!0},n+o))})),c}n(233);function le(){var e=Object(a.c)((function(e){return e.blocks.present.graph.connections})),t=(Object(a.c)((function(e){return e.blocks.present.positions})),Object(a.c)((function(e){return e.blocks.present.groups})),{});return e.map((function(e){var n=e[0],c=e[1],o=e[2];t.hasOwnProperty(n)?t[n]+=1:t[n]=1,t.hasOwnProperty(c)?t[c]+=1:t[c]=1;var r=t[n];r%2===0?r/=-2:(r+=1,r/=2);var a=t[c];a%2===0?a/=-2:(a+=1,a/=2);t[n];return Object(s.jsx)(i.b,{id:g,children:Object(s.jsx)(ie.a,{id:n+c+o,start:n,end:c,startAnchor:[{position:"right",offset:{bottomness:10*r,rightness:0}},{position:"left",offset:{bottomness:10*r,rightness:0}},{position:"bottom",offset:{bottomness:0,rightness:10*r}},{position:"top",offset:{bottomness:0,rightness:10*r}}],endAnchor:[{position:"right",offset:{bottomness:10*a,rightness:0}},{position:"left",offset:{bottomness:10*a,rightness:0}},{position:"bottom",offset:{bottomness:0,rightness:10*a}},{position:"top",offset:{bottomness:0,rightness:10*a}}],strokeWidth:2,headSize:3,lineColor:b[o].color,headColor:b[o].color,arrowBodyProps:{className:"arrow_body"},arrowHeadProps:{className:"arrow_head"},SVGcanvasProps:{className:"svg"},label:{middle:Object(s.jsx)("div",{className:"arrow_label",style:{color:b[o].color,backgroundColor:"white",borderStyle:"solid",borderWidth:"0px",borderColor:b[o].color,borderRadius:"5px"},children:"'"+o[0]+o[1]})}},n+c+o)},n+c+o)}))}function de(){var e=Object(a.c)((function(e){return e.blocks.present.positions})),t=Object(a.c)((function(e){return e.blocks.present.groups})),n=Object(a.c)((function(e){return e.blocks.present.order})),c=Object(a.c)((function(e){return e.blocks.present.graph.selectedNode})),o=Object(a.c)((function(e){return e.blocks.present.graph.connections})),r=Object(a.c)((function(e){return e.blocks.present.graph.boxes}));Object(a.c)((function(e){return e.blocks.present.txts}));return Object.keys(t).map((function(a){var l=t[a],d=function(e,t){var n=Math.min.apply(Math,Object($.a)(e.map((function(e){return Math.max(0,t[e][0])})))),c=Math.min.apply(Math,Object($.a)(e.map((function(e){return Math.max(0,t[e][1])})))),o=Math.max.apply(Math,Object($.a)(e.map((function(e){var n=0;try{n=document.getElementById(e).offsetWidth}catch(c){console.log(c)}return n+t[e][0]}))));return{height:Math.max.apply(Math,Object($.a)(e.map((function(e){var n=0;try{n=document.getElementById(e).offsetHeight}catch(c){console.log(c)}return n+t[e][1]+40}))))-c,width:o-n,top:c,left:n}}(function(e,t){for(var n=[],c=!1,o=0;o<e.length;o+=1){var r=e[o];t[0]===r?(c=!0,n.push(r)):r===t[1]?(c=!1,n.push(r)):!0===c&&n.push(r)}return n}(n,l),e),u=d.height,b=d.width,j={position:"absolute",top:d.top,left:d.left,height:u,width:b};c===a&&Object.assign(j,{borderColor:"gold",backgroundColor:"gold"});var O=ee({boxLabels:r[a],connectionLabels:o.filter((function(e){return e[0]===a})).map((function(e){return e[2]}))});return j.borderColor=O,Object(s.jsx)(i.b,{id:p,holdToDisplay:-1,children:Object(s.jsx)("fieldset",{id:a,className:"node group-node",style:j,children:Object(s.jsx)(te,{id:a})})},a)}))}function ue(){return Object(s.jsx)(C.a,{handle:".drag-bar",bounds:{top:0},children:Object(s.jsxs)("div",{id:"graph",children:[Object(s.jsx)("div",{className:"drag-bar"}),Object(s.jsxs)("div",{id:"canvas",children:[Object(s.jsx)(oe,{}),Object(s.jsx)(de,{})]}),Object(s.jsxs)("div",{id:"links",children:[Object(s.jsx)(se,{}),Object(s.jsx)(le,{})]})]})})}n(234);function be(){var e=Object(a.c)((function(e){return e.blocks.present})),t=Object(c.useState)(""),n=Object(k.a)(t,2),o=n[0],r=n[1];return Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),c=document.createElement("a");c.setAttribute("href",n),c.setAttribute("download",t+".json"),document.body.appendChild(c),c.click(),c.remove()}(e,o)},children:[Object(s.jsxs)("label",{children:["Save File ",Object(s.jsx)("input",{type:"text",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(s.jsx)("input",{type:"submit",value:"Save"})]})}function je(){var e=Object(a.b)();return Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=document.getElementById("file").files[0];if(n){var c=new FileReader;c.readAsText(n),c.onload=function(){var t=JSON.parse(c.result);console.log(t),e({type:"loadState",payload:{state:t}})}}},children:[Object(s.jsx)("input",{type:"file",id:"file",name:"file",className:"inputfile"}),Object(s.jsx)("input",{type:"submit",value:"Load"})]})}var pe=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(u,{}),Object(s.jsx)(f,{}),Object(s.jsx)(h,{}),Object(s.jsx)(y,{}),Object(s.jsx)(v,{}),Object(s.jsxs)("div",{className:"top",children:[Object(s.jsxs)("div",{className:"load_save_buttons",children:[Object(s.jsx)(be,{}),Object(s.jsx)(je,{})]}),Object(s.jsx)("div",{className:"right_buttons",children:Object(s.jsx)(Z,{})})]}),Object(s.jsxs)("div",{className:"bottom",children:[Object(s.jsx)("div",{className:"left-panel",children:Object(s.jsx)(ue,{})}),Object(s.jsx)("div",{className:"right-panel",children:Object(s.jsx)(F,{})})]})]})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))},fe=n(27),he=n(10),ge=n(2),ye={caret:-1,activeId:"id1",order:["id1"],groups:{},txts:{id1:JSON.stringify(Object(B.convertToRaw)(B.EditorState.createEmpty().getCurrentContent()))},splits:{id1:{slice1:0,slice2:0}},selections:{id1:null},notes:{id1:""},views:{id1:!1},positions:{id1:[0,0]},graph:{connections:[],mode:null,selectedNode:null,boxes:{id1:[]}}};var xe=Object(fe.b)({name:"args",initialState:{connection_color:null,tail_selected:!1,tail_id:null},reducers:{updateColor:function(e,t){e.connection_color=t.color,e.tail_selected=!1,e.tail_id=null},updateTail:function(e,t){e.tail_selected=!0,e.tail_id=t.id},resetToDragging:function(e){e.connection_color=null,e.tail_selected=!1,e.tail_id=null}}}),me=xe.actions,ve=(me.updateColor,me.updateTail,me.resetToDragging,xe.reducer),ke=Object(fe.a)({reducer:{blocks:P()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loadState":var n=t.payload.state.positions,c=Object.keys(n).reduce((function(e,t){return Math.min(n[t][0],e)}),0),o=Object.keys(n).reduce((function(e,t){return Math.min(n[t][1],e)}),0);Object.keys(n).map((function(e,t){return n[e]=[n[e][0]-c,n[e][1]-o],n}));var r=t.payload.state.groups||{},a=Object(ge.a)({},t.payload.state.graph.boxes),i={},s=t.payload.state.order,l=Object.keys(r).concat(s);return l.forEach((function(e){Array.isArray(a[e])?i[e]=a[e]:"string"===typeof a[e]?i[e]=[a[e]]:i[e]=[]})),Object(ge.a)(Object(ge.a)({},t.payload.state),{},{groups:r,positions:n,graph:Object(ge.a)(Object(ge.a)({},t.payload.state.graph),{},{boxes:Object(ge.a)({},i)})});case"updateId":return Object(ge.a)(Object(ge.a)({},e),{},{activeId:t.payload.id});case"updateText":return Object(ge.a)(Object(ge.a)({},e),{},{txts:Object(ge.a)(Object(ge.a)({},e.txts),{},Object(he.a)({},t.payload.id,t.payload.txt)),splits:Object(ge.a)(Object(ge.a)({},e.splits),{},Object(he.a)({},t.payload.id,t.payload.split)),selections:Object(ge.a)(Object(ge.a)({},e.selections),{},Object(he.a)({},t.payload.id,t.payload.selection))});case"updateSelection":return Object(ge.a)(Object(ge.a)({},e),{},{activeId:t.payload.id,splits:Object(ge.a)(Object(ge.a)({},e.splits),{},Object(he.a)({},t.payload.id,t.payload.split)),selections:Object(ge.a)(Object(ge.a)({},e.selections),{},Object(he.a)({},t.payload.id,t.payload.selection))});case"splitText":var d=function(){var n,c,o=t.payload.id,r=e.order.indexOf(o),a=Object(fe.c)(),i=e.splits[o].slice1,s=e.splits[o].slice2,l=Object($.a)(e.order);l.splice(r+1,0,a);for(var d=Object(B.convertFromRaw)(JSON.parse(i)).getPlainText().length,u=Object(B.convertFromRaw)(JSON.parse(s)).getPlainText().length,b=document.getElementsByClassName("node").namedItem(o).clientHeight*d/(d+u+.01),j=e.positions[o],p=[j[0],j[1]+b+50],O=Object.values(e.positions),f=0;O.filter((function(e){return JSON.stringify(e)===JSON.stringify(p)})).length>0&&(f+=1,p[0]+=15,p[1]+=15,!(f>5)););return{v:Object(ge.a)(Object(ge.a)({},e),{},{activeId:a,order:l,txts:Object(ge.a)(Object(ge.a)({},e.txts),{},(n={},Object(he.a)(n,o,i),Object(he.a)(n,a,s),n)),splits:Object(ge.a)(Object(ge.a)({},e.splits),{},(c={},Object(he.a)(c,o,{slice1:i,slice2:i}),Object(he.a)(c,a,{slice1:s,slice2:s}),c)),notes:Object(ge.a)(Object(ge.a)({},e.notes),{},Object(he.a)({},a,"")),views:Object(ge.a)(Object(ge.a)({},e.views),{},Object(he.a)({},a,!1)),positions:Object(ge.a)(Object(ge.a)({},e.positions),{},Object(he.a)({},a,p)),graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{boxes:Object(ge.a)(Object(ge.a)({},e.graph.boxes),{},Object(he.a)({},a,[]))})})}}();if("object"===typeof d)return d.v;case"mergeText":var u=t.payload.id,b=e.order.indexOf(u);if(0===b)return e;var j=e.order[b-1],p=Object($.a)(e.order);p.splice(b,1);var O=e.graph.connections.map((function(e){return e.map((function(e){return e===u?j:e}))})).filter((function(e){return e[0]!==e[1]})),f=new Set(O.map((function(e){return e.join()})));O=Object($.a)(f).map((function(e){return e.split(",")}));var h=Object(ge.a)({},e.graph.boxes);h[j]=h[j].concat(h[u]),delete h[u];var g=Object(B.convertFromRaw)(JSON.parse(e.txts[j])),y=Object(B.convertFromRaw)(JSON.parse(e.txts[u])),x=B.EditorState.createWithContent(y).getSelection(),m=x.getAnchorKey(),v=B.SelectionState.createEmpty("blockkey").merge({anchorKey:m,anchorOffset:0,focusKey:m,focusOffset:0}),k=B.Modifier.replaceWithFragment(y,v,g.getBlockMap()),S=e.groups,C={};return Object.keys(S).map((function(t){if(u===S[t][0]?C[t]=[e.order[b+1],S[t][1]]:u===S[t][1]?C[t]=[S[t][0],e.order[b-1]]:C[t]=S[t],C[t][0]===C[t][1]){delete C[t];var n=Object($.a)(O);O=[],n.forEach((function(e){t!==e[0]&&t!==e[1]&&O.push(e)}))}})),Object(ge.a)(Object(ge.a)({},e),{},{activeId:j,order:p,txts:Object(ge.a)(Object(ge.a)({},e.txts),{},Object(he.a)({},j,JSON.stringify(Object(B.convertToRaw)(k)))),splits:Object(ge.a)(Object(ge.a)({},e.splits),{},Object(he.a)({},j,{slice1:0,slice2:0})),notes:Object(ge.a)(Object(ge.a)({},e.notes),{},Object(he.a)({},j,e.notes[j]+e.notes[u])),graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{connections:O,boxes:h}),groups:C});case"toggleNote":var A=t.payload.id;return Object(ge.a)(Object(ge.a)({},e),{},{views:Object(ge.a)(Object(ge.a)({},e.views),{},Object(he.a)({},A,!e.views[A]))});case"updateNote":var N=t.payload.id,E=document.activeElement;return Object(ge.a)(Object(ge.a)({},e),{},{notes:Object(ge.a)(Object(ge.a)({},e.notes),{},Object(he.a)({},N,E.value))});case"updatePosition":var M=t.payload,T=M.id,w=M.x,R=M.y;return Object(ge.a)(Object(ge.a)({},e),{},{positions:Object(ge.a)(Object(ge.a)({},e.positions),{},Object(he.a)({},T,[w,R]))});case"setMode":return Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{mode:t.payload.label,selectedNode:t.payload.id})});case"resetMode":return Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{mode:null,selectedNode:null}),mode:"",id:null});case"addBox":var I=t.payload,L=I.label,_=I.id,D=[];return _ in e.graph.boxes&&(D=Object($.a)(e.graph.boxes[_])),D.includes(L)||D.push(L),Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{boxes:Object(ge.a)(Object(ge.a)({},e.graph.boxes),{},Object(he.a)({},_,D))})});case"removeBox":var K=t.payload,F=K.id,J=K.label,P=Object($.a)(e.graph.boxes[F]);return P=P.filter((function(e,t,n){return e!==J})),Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{boxes:Object(ge.a)(Object(ge.a)({},e.graph.boxes),{},Object(he.a)({},F,P))})});case"addConnection":return e.graph.connections.filter((function(e){return e.toString()===t.payload.connection.toString()})).length>0&&e.graph.connections.length>0?e:Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{connections:[].concat(Object($.a)(e.graph.connections),[t.payload.connection])})});case"deleteConnection":var H=e.graph.connections.filter((function(e){return e[0]+e[1]+e[2]!==t.payload.id}));return Object(ge.a)(Object(ge.a)({},e),{},{graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{connections:H})});case"groupIds":var W=t.payload,z=W.start,U=W.end,G=W.selectionSize,V=e.order,X=e.groups,Y=Object(fe.c)();if(z===U)return e;var q=V.indexOf(z),Q=V.indexOf(U),Z=V.slice(q,Q+1);if(G!==Z.length)return e;var ee=new Set;Object.keys(X).forEach((function(e){var t=X[e],n=V.indexOf(t[0]),c=V.indexOf(t[1]);V.slice(n,c+1).forEach((function(e){return ee.add(e)}))}));var te=!1;return Z.forEach((function(e){ee.has(e)&&(te=!0)})),te?e:Object(ge.a)(Object(ge.a)({},e),{},{groups:Object(ge.a)(Object(ge.a)({},e.groups),{},Object(he.a)({},Y,[z,U]))});case"ungroupIds":var ne=t.payload,ce=ne.start,oe=ne.end,re=e.order,ae=e.groups,ie=re.indexOf(ce),se=re.indexOf(oe),le=re.slice(ie,se+1),de=Object(ge.a)({},ae),ue=Object(ge.a)({},e.graph.boxes),be=Object($.a)(e.graph.connections);return Object.keys(ae).forEach((function(t){var n=ae[t],c=re.indexOf(n[0]),o=re.indexOf(n[1]);re.slice(c,o+1).filter((function(e){return-1!==le.indexOf(e)})).length>0&&(delete de[t],delete ue[t],be=[],Object($.a)(e.graph.connections).forEach((function(e){t!==e[0]&&t!==e[1]&&be.push(e)})))})),Object(ge.a)(Object(ge.a)({},e),{},{groups:de,graph:Object(ge.a)(Object(ge.a)({},e.graph),{},{boxes:ue,connections:be})});default:return e}}),{filter:Object(J.excludeAction)(["updateId","updateCaret","updatePosition","toggleNote","updateNote","resetMode","setMode","updateSelection"])}),args:ve}});r.a.render(Object(s.jsx)(a.a,{store:ke,children:Object(s.jsx)(pe,{})}),document.getElementById("root")),Oe()},51:function(e,t,n){},62:function(e,t,n){}},[[235,1,2]]]);
//# sourceMappingURL=main.e29ccf8a.chunk.js.map