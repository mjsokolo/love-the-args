{"version":3,"sources":["features/blocks/Note.js","features/blocks/helpers.js","features/blocks/Text.js","features/blocks/Blocks.js","features/HeaderButtons/HeaderButtons.js","features/graph/cursors/blue.png","features/graph/cursors/green.png","features/graph/cursors/pink.png","features/graph/cursors/purple.png","features/graph/cursors/yellow.png","features/graph/GraphContextMenu.js","features/graph/cursors/red.png","features/graph/Nodes.js","features/graph/SequentialPath.js","features/graph/ConnectionContextMenu.js","features/graph/ConnectionListener.js","features/graph/Connections.js","App.js","features/graph/Graph.js","reportWebVitals.js","features/blocks/BlocksReducer.js","features/ArgButtons/ArgButtonsSlice.js","app/store.js","index.js"],"names":["Note","id","note","useSelector","state","blocks","present","notes","view","views","dispatch","useDispatch","undefined","class","onSelect","type","payload","onChange","onClick","e","ctrlKey","metaKey","shiftKey","value","ToggleNoteButton","className","splitState","caret","getSelection","getAnchorOffset","end","getCurrentContent","getPlainText","length","currentBlockKey","getAnchorKey","lastBlockKey","getLastBlock","key","firstBlockKey","getFirstBlock","selectionSlice1","SelectionState","createEmpty","merge","anchorKey","anchorOffset","focusOffset","focusKey","selectionSlice2","contentSlice2","Modifier","removeRange","contentSlice1","slice1","JSON","stringify","convertToRaw","slice2","getSelectionInfo","selection","flag","getFocusOffset","getFocusKey","isBackward","styleMap","TANNA","color","AMORA","AMORA_MIDRASH","STAM","STAM_MIDRASH","CLEAR","TextField","txt","txts","reduxEditorState","EditorState","createWithContent","convertFromRaw","parse","useState","localEditorState","setEditorState","console","log","getCurrentInlineStyle","customStyleMap","editorState","justSelection","split","Blocks","order","map","MergeButton","onMouseDown","event","preventDefault","document","activeElement","getAttribute","parentElement","SplitButton","onMouseLeave","RedoButton","ActionCreators","redo","UndoButton","undo","HistoricalLayerButton","props","selections","data-style","dataStyle","onMouseUp","style","currentTarget","contentState","newSelectionState","createSelection","newEditorState","acceptSelection","removeInlineStyles","RichUtils","toggleInlineStyle","name","HeaderButtons","contentWithoutStyles","reduce","newContentState","removeInlineStyle","push","MODES","Mikrei","cursor","blue","Din","green","Taahm","pink","Koteret","purple","אמירה","שאלה","yellow","תשובה","קושיא","תירוץ","ראיה","סיוע","LAYOUT","mishnah","talmud","NodeMenuId","GraphContextMenu","handleClick","data","element","target","mode","Object","keys","book","title","Nodes","positions","position","handleDrag","d","srcElement","x","lastX","deltaX","y","lastY","deltaY","onStop","onDrag","defaultPosition","Node","SequentialPath","links","i","path","forEach","start","strokeWidth","lineColor","headColor","dashness","ConnectionMenuId","ConnectionContextMenu","reducerType","ConnectionListener","graph","useEffect","f","classList","selectedNode","connections","includes","connection","addEventListener","removeEventListener","NodeConnections","anchors","hasOwnProperty","sideStartOffset","sideEndOffset","startAnchor","offset","bottomness","rightness","endAnchor","headSize","arrowBodyProps","arrowHeadProps","SVGcanvasProps","label","middle","transform","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","activeId","id1","splits","ArgButtonsSlice","createSlice","connection_color","tail_selected","tail_id","reducers","updateColor","action","updateTail","resetToDragging","actions","configureStore","reducer","undoable","index","indexOf","id2","nanoid","textOne","textTwo","newOrder","splice","pos","newPosition","idx","newConnections","filter","s","Set","array","join","contentState1","contentState2","selectionState2","insertionSelectionState","mergedContent","replaceWithFragment","getBlockMap","c","toString","excludeAction","args","ArgsButtonsReducer","ReactDOM","render","store","getElementById"],"mappings":"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","file":"static/js/main.1596085b.chunk.js","sourcesContent":["import React from 'react';\nimport TextareaAutosize from 'react-autosize-textarea';\nimport './Blocks.css';\nimport { useSelector, useDispatch } from 'react-redux';\n\nfunction Note({ id }) {\n  const note = useSelector((state) => state.blocks.present.notes[id]);\n  const view = useSelector((state) => state.blocks.present.views[id]);\n  const dispatch = useDispatch();\n  if (view === false || view === undefined) {\n    return <div />;\n  }\n  return (\n    <TextareaAutosize\n      id={id}\n      class=\"note\"\n      onSelect={() => dispatch({ type: 'updateNote', payload: { id } })}\n      onChange={() => dispatch({ type: 'updateNote', payload: { id } })}\n      onClick={(e) => {\n        if (e.ctrlKey || e.metaKey || e.shiftKey) return 0; // ignore shift clicks\n        dispatch({ type: 'updateNote', payload: { id } });\n      }}\n      value={note}\n    />\n  );\n}\n\nfunction ToggleNoteButton({ id }) {\n  const dispatch = useDispatch();\n  return (\n    <label className=\"switch\">\n      <input\n        type=\"checkbox\"\n        onChange={() => dispatch({ type: 'toggleNote', payload: { id } })}\n      />\n      <span className=\"slider round\" />\n    </label>\n  );\n}\n\nexport { Note, ToggleNoteButton };\n","import {\n  EditorState,\n  SelectionState,\n  Modifier,\n  convertToRaw,\n  RichUtils,\n} from 'draft-js';\n\nexport function splitState(state) {\n  const caret = state.getSelection().getAnchorOffset();\n  const end = state.getCurrentContent().getPlainText().length;\n\n  const currentBlockKey = state.getSelection().getAnchorKey();\n  const lastBlockKey = state.getCurrentContent().getLastBlock().key;\n  const firstBlockKey = state.getCurrentContent().getFirstBlock().key;\n\n  const selectionSlice1 = SelectionState.createEmpty('blockkey').merge({\n    anchorKey: currentBlockKey,\n    anchorOffset: caret,\n    focusOffset: end,\n    focusKey: lastBlockKey,\n  });\n  const selectionSlice2 = SelectionState.createEmpty('blockkey').merge({\n    anchorKey: firstBlockKey,\n    anchorOffset: 0,\n    focusKey: currentBlockKey,\n    focusOffset: caret,\n  });\n\n  const contentSlice2 = Modifier.removeRange(\n    state.getCurrentContent(),\n    selectionSlice2,\n    'forward'\n  );\n  const contentSlice1 = Modifier.removeRange(\n    state.getCurrentContent(),\n    selectionSlice1,\n    'forward'\n  );\n\n  return {\n    slice1: JSON.stringify(convertToRaw(contentSlice1)),\n    slice2: JSON.stringify(convertToRaw(contentSlice2)),\n  };\n}\n\nexport function getSelectionInfo(state) {\n  const selection = state.getSelection();\n\n  const flag = selection.getAnchorOffset() < selection.getFocusOffset();\n  if (flag) {\n    return {\n      anchorKey: selection.getAnchorKey(),\n      anchorOffset: selection.getAnchorOffset(),\n      focusKey: selection.getFocusKey(),\n      focusOffset: selection.getFocusOffset(),\n      isBackward: flag,\n    };\n  }\n\n  return {\n    anchorKey: selection.getFocusKey(),\n    anchorOffset: selection.getFocusOffset(),\n    focusKey: selection.getAnchorKey(),\n    focusOffset: selection.getAnchorOffset(),\n    isBackward: flag,\n  };\n}\n\nexport function createSelection({\n  anchorKey,\n  anchorOffset,\n  focusKey,\n  focusOffset,\n}) {\n  return SelectionState.createEmpty('blockkey').merge({\n    anchorKey,\n    anchorOffset,\n    focusKey,\n    focusOffset,\n    isBackward: false,\n  });\n}\n","import React, { useState, ReactPropTypes } from 'react';\nimport { useSelector, useDispatch, connect } from 'react-redux';\nimport {\n  Editor,\n  EditorState,\n  RichUtils,\n  SelectionState,\n  Modifier,\n  convertToRaw,\n  convertFromRaw,\n} from 'draft-js';\nimport { splitState, createSelection, getSelectionInfo } from './helpers';\nimport './Blocks.css';\nimport { set } from 'lodash';\n\nexport const styleMap = {\n  TANNA: {\n    color: 'blue',\n  },\n  AMORA: {\n    color: 'green',\n  },\n  AMORA_MIDRASH: {\n    color: 'aqua',\n  },\n  STAM: {\n    color: 'purple',\n  },\n  STAM_MIDRASH: {\n    color: 'orange',\n  },\n  CLEAR: {\n    color: 'black',\n  },\n};\n\nexport default function TextField({ id }) {\n  const txt = useSelector((state) => state.blocks.present.txts)[id];\n\n  const reduxEditorState = EditorState.createWithContent(\n    convertFromRaw(JSON.parse(txt))\n  );\n  const [localEditorState, setEditorState] = useState(() =>\n    EditorState.createWithContent(convertFromRaw(JSON.parse(txt)))\n  );\n  const dispatch = useDispatch();\n\n  if (\n    reduxEditorState.getCurrentContent().getPlainText() !==\n    localEditorState.getCurrentContent().getPlainText()\n  ) {\n    console.log('infinite loop1');\n    setEditorState(reduxEditorState);\n  }\n  if (\n    reduxEditorState.getCurrentInlineStyle() !==\n    localEditorState.getCurrentInlineStyle()\n  ) {\n    console.log('infinite loop2'); // this is sometimes triggered a lot\n    console.log(reduxEditorState.getCurrentInlineStyle());\n    console.log(localEditorState.getCurrentInlineStyle());\n    console.log(reduxEditorState.getSelection());\n    console.log(reduxEditorState.getSelection());\n\n    setEditorState(reduxEditorState);\n  }\n  if (\n    txt !== JSON.stringify(convertToRaw(localEditorState.getCurrentContent()))\n  ) {\n    console.log('infinite loop3');\n    setEditorState(reduxEditorState);\n  }\n\n  return (\n    <>\n      <div className=\"text_editor\" id={id}>\n        <Editor\n          customStyleMap={styleMap}\n          editorState={localEditorState}\n          onChange={(state) => {\n            const justSelection =\n              state.getCurrentContent().getPlainText() ===\n              localEditorState.getCurrentContent().getPlainText();\n            setEditorState(state);\n            if (justSelection) {\n              dispatch({\n                type: 'updateSelection',\n                payload: {\n                  id,\n                  split: splitState(state),\n                  selection: getSelectionInfo(state),\n                },\n              });\n            } else {\n              console.log(state.getSelection().getAnchorOffset());\n              dispatch({\n                type: 'updateText',\n                payload: {\n                  id,\n                  txt: JSON.stringify(convertToRaw(state.getCurrentContent())),\n                  split: splitState(state),\n                  selection: getSelectionInfo(state),\n                },\n              });\n            }\n          }}\n        />\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Note, ToggleNoteButton } from './Note';\nimport TextField from './Text';\nimport './Blocks.css';\n\nexport default function Blocks() {\n  const order = useSelector((state) => state.blocks.present.order);\n\n  const blocks = order.map((id) => (\n    <div className=\"block\" key={id}>\n      <ToggleNoteButton id={id} />\n      <TextField id={id} />\n      <Note id={id} />\n    </div>\n  ));\n  return blocks;\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './HeaderButtons.css';\nimport { ActionCreators } from 'redux-undo';\nimport {\n  EditorState,\n  RichUtils,\n  convertFromRaw,\n  convertToRaw,\n  Modifier,\n} from 'draft-js';\nimport {\n  splitState,\n  createSelection,\n  getSelectionInfo,\n} from '../blocks/helpers';\n\nexport function MergeButton() {\n  const dispatch = useDispatch();\n  return (\n    <button\n      type=\"button\"\n      onMouseDown={(event) => {\n        event.preventDefault();\n        if (\n          // verify active element is a Textfield Component\n          document.activeElement.getAttribute('class') !==\n          'notranslate public-DraftEditor-content'\n        ) {\n          return;\n        }\n        const {\n          id,\n        } = document.activeElement.parentElement.parentElement.parentElement;\n        dispatch({ type: 'mergeText', payload: { id } });\n      }}\n    >\n      merge\n    </button>\n  );\n}\n\nexport function SplitButton() {\n  const dispatch = useDispatch();\n  return (\n    <button\n      type=\"button\"\n      onMouseLeave={(e) => e.preventDefault()}\n      onMouseDown={(event) => {\n        event.preventDefault();\n        if (\n          // verify active element is a Textfield Component\n          document.activeElement.getAttribute('class') !==\n          'notranslate public-DraftEditor-content'\n        ) {\n          return;\n        }\n        const {\n          id,\n        } = document.activeElement.parentElement.parentElement.parentElement;\n        dispatch({ type: 'splitText', payload: { id } });\n      }}\n    >\n      split\n    </button>\n  );\n}\n\nexport function RedoButton() {\n  const dispatch = useDispatch();\n  return (\n    <button type=\"button\" onClick={() => dispatch(ActionCreators.redo())}>\n      redo\n    </button>\n  );\n}\n\nexport function UndoButton() {\n  const dispatch = useDispatch();\n  // const UndoButton = (\n  return (\n    <button\n      type=\"button\"\n      onClick={() => {\n        dispatch(ActionCreators.undo());\n      }}\n    >\n      undo\n    </button>\n  );\n}\n\nexport function HistoricalLayerButton(props) {\n  const dispatch = useDispatch();\n  const txts = useSelector((state) => state.blocks.present.txts);\n  const selections = useSelector((state) => state.blocks.present.selections);\n  return (\n    <button\n      type=\"button\"\n      data-style={props.dataStyle}\n      onMouseUp={(event) => event.preventDefault()}\n      onMouseDown={(event) => {\n        event.preventDefault();\n        if (\n          // verify active element is a Textfield Component\n          document.activeElement.getAttribute('class') !==\n          'notranslate public-DraftEditor-content'\n        ) {\n          return;\n        }\n        const style = event.currentTarget.getAttribute('data-style');\n        const {\n          id,\n        } = document.activeElement.parentElement.parentElement.parentElement;\n\n        const contentState = convertFromRaw(JSON.parse(txts[id]));\n        const newSelectionState = createSelection(selections[id]);\n        console.log(\n          'prior to update: ',\n          newSelectionState.getAnchorKey(),\n          newSelectionState.getAnchorOffset()\n        );\n\n        let newEditorState = EditorState.createWithContent(contentState);\n\n        newEditorState = EditorState.acceptSelection(\n          newEditorState,\n          newSelectionState\n        );\n        newEditorState = removeInlineStyles(newEditorState);\n        newEditorState = RichUtils.toggleInlineStyle(newEditorState, style);\n\n        console.log(\n          'after update:',\n          newEditorState.getSelection().getAnchorKey(),\n          newEditorState.getSelection().getAnchorOffset()\n        );\n\n        // newEditorState = EditorState.forceSelection(\n        //   newEditorState,\n        //   newEditorState.getSelection()\n        // );\n\n        dispatch({\n          type: 'updateText',\n          payload: {\n            id,\n            txt: JSON.stringify(\n              convertToRaw(newEditorState.getCurrentContent())\n            ),\n            split: splitState(newEditorState),\n            selection: getSelectionInfo(newEditorState),\n          },\n        });\n      }}\n    >\n      {props.name}\n    </button>\n  );\n}\n\nexport default function HeaderButtons() {\n  return (\n    <div className=\"header_buttons\">\n      <UndoButton />\n      <RedoButton />\n      <MergeButton />\n      <SplitButton />\n      <HistoricalLayerButton dataStyle=\"TANNA\" name=\"Tannaitic\" />\n      <HistoricalLayerButton dataStyle=\"AMORA\" name=\"Amoraic\" />\n      <HistoricalLayerButton\n        dataStyle=\"AMORA_MIDRASH\"\n        name=\"Tannaitic from Amora\"\n      />\n      <HistoricalLayerButton dataStyle=\"STAM\" name=\"Stam\" />\n      <HistoricalLayerButton\n        dataStyle=\"STAM_MIDRASH\"\n        name=\"Tannaitic from Stam\"\n      />\n      <HistoricalLayerButton dataStyle=\"CLEAR\" name=\"Clear\" />\n    </div>\n  );\n}\n\nconst removeInlineStyles = (editorState) => {\n  const styles = [\n    'TANNA',\n    'AMORA',\n    'AMORA_MIDRASH',\n    'STAM',\n    'STAM_MIDRASH',\n    'CLEAR',\n  ];\n  const contentState = editorState.getCurrentContent();\n  const contentWithoutStyles = styles.reduce(\n    (newContentState, style) =>\n      Modifier.removeInlineStyle(\n        newContentState,\n        editorState.getSelection(),\n        style\n      ),\n    contentState\n  );\n\n  const newEditorState = EditorState.push(\n    editorState,\n    contentWithoutStyles,\n    'change-inline-style'\n  );\n\n  return newEditorState;\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEwSURBVDiN1dFNK6xhGAfw3zyPt8epSVGasaApdcKeklj4BGflC1jIhuKLWFrYkNVZKhakrMRCEkU6HXVo5C2lkQxjY4HOM83bxn93X1f3r//dzXfNGFYruRjEzEPSjdipFYjRGyayJI6RqAEooH2E6TPCc9RXCSbed8kBZg6pv8KPasAPz4z6mT0iukRrDUBo6GP2gOYzdFYAFv7zEUEvM6e07KOvTDC2Q4apLG0bGPq6rSsdyh2wkuS2jYducrCIrjIb3m2xfE9THUcB2RQPIa/hV6wE8GKTuQwnf3jJ8fMZqWI3ioDrLcy3U+jBOGsRv66xUAmY598jBt7PJ+x10ZCmoxdRHBjGzA+x9HlU+Esyw1CW7UGsFGtaYqInJn+jUG7DmOTz7AYYRr6qbqXmDXXeQx0BaLXiAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFISURBVDiN1dPBSpRhFIfx35lvBhkEEcrFaJEM1EJdBglRtuoaAi8haBORIHgN3oMuW4ngxghchLYIYjJQJJQQJ2IWUSnS4OdmxBz6dMbPjf/dOYf34TkHXq5rnmHpMg8LGf3EkB58uCqgeBqNeB51YQORG4iCiifxKnYkdlHKB4zWrM94TMW6kh/ozQM8XbPsQUzHF2XfceNywPa7FY3FVNT02sGdfIYnSYzG69jS7xPGujXMUqjGy6gb8BaP2sfFjkH7aulC2qfhpt/u+gPmMNydYcNKOpf+1KPos4I9Fb8kjiTtsIuBu96ls2nVhq+O7BvxF5VOl/o3k25bwWqrvue+1ZiJZRf88SzDpm8OMN6qN300rGTQLaMoZwGTjP465s90Utv6VeNx1L33EIvnmXaWssN4EW+Qdmv4/zQ1rSlgAs18dh3mGALgR6kw54/AAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF5SURBVDiN1dM/SEJRFMfx77tP6z0DMZPCFIqgP5C0CP0ZgobWoiEoaA+kJeE9CCe39mgJ2gKnaHoQQRE0RUQUlZBEZaC+6B+RPAgpWyLEkPLP0m+753I/nMPhwn/NNLBZyUNRoi4HW1vrJTioFcji6OjjcShk2iTpApCqBiUQfS0tIzfhcFKR5RRgrwoUkiQAfE7nYErTzh12+z3QUA34PaZbVQcedD3uVtU7oKlqEECtqwuYun7a7HAkgbayQfL5H4uwC9Gb0bTLNpfrBAiUB5bqQIiO6/l5s9vj2QGGi+9tf4XuLes0ZBjO66cnTyab7XywLIA1oL2sDq+en/fGYrGXRkWxbcTj4sg0vZlsVs59fMjF2K/gYTq927m01GEkEle593droqcnB3j/OlVhZob8/j1g/+vcNRsM7r9GIttU+MengK3Cgk0IMx+Nxvt9vltArQQtzuTq+PhmMhw2gJVagDSq6tvZ3Nw6kK8JCCwAy4BSK/DXfAJAEmjAhZgYGAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGhSURBVDiN1ZO7SxxRFIe/e2fGcRw0PtFVE5eN2SWslY2CSCRdILUI/hOSQoQQCyWNKChikVKSUrAJiOAD1kJRC4MPiCbBFR8bZU2WVVfdWSeNBF+j+0iTrzvncj9+51wu/K+0AGPpXJQOfaUi260LxPy/EvKqtDncVt0dksivgMhYiECW6ZVNHd6+oCrUHUDLSCgREuCRVlD/1jewqsmsA8BMWygQf8fMUcy6Tt/QmqGYP4Gi9IRCXNtbltRqOn2Dy6aaFwSqUhbaiFsPIYX0v/P1fyvQir4ANSkJnRBIT4e3N1SiuyaBxpvnarKi48TR8ujecF74fL84Gv/97CRxBPARcKeU8PD8IDC81R/JUUx1JbIod2NBV9SKKAk7odyUPSjcPt2c7tlo96xFl35YF9aJP7c2DriSneoqrU+MpwFg7rL21hU2zXU9/zDBA3/cKaG1FfseA+ov6/WFXwG3LvXyx4bHDxhOQsWhvwp8utqwsTfztULPy5LXoZnweAPw+b6kSWEo5tmb6vcjgJ1qwjux7Lg1ezglgReAlWG+5PgDolNwtncDrn4AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFOSURBVDiN1dPPSgJRFMfx7/yR1CCYKQRxYQiTi8SNYLkIegHBRVDQXvANegNfoE3grm24EiQoAlcSIoYmBOE4gcyE0yKEIGZhiyJEDP/MbPrt7jncD+dwufBfcwJUV7ko/lGXUinWBIF7r0CKRd5aLSxZ5gkQXIOCgJhMctjvY/j9DACfK1AUv3uRCPuDAY/BIENg3Q34u6aqsmfbdFWVV2DTNQgQCJCwLNqhEAYQXRpkxkP4fOyaJs/RKA9AYllw9gQiMV3Hise5BQ6m+/Ki0HBIu1BgQ9fZMk002wbgEtheasJej1o2y7uiIJfLiM0mYdNEchykaWwu2Ghwp2nEKhV6jsNHLocDhBfdajKnmQw1oP5z3snnqY9G3LDiHz8GricLsow1HtNNp3kBAqug0zkqlagaBhXgwgsQReGz0+EKGHsCAmfAOeD3CpybL9FoV7e/DIRGAAAAAElFTkSuQmCC\"","import React from 'react';\nimport './css/GraphContextMenu.css';\nimport { ContextMenu, MenuItem, SubMenu } from 'react-contextmenu';\nimport { useDispatch } from 'react-redux';\nimport blue from './cursors/blue.png';\nimport green from './cursors/green.png';\nimport pink from './cursors/pink.png';\nimport purple from './cursors/purple.png';\nimport red from './cursors/red.png';\nimport yellow from './cursors/yellow.png';\n\nexport const MODES = {\n  Mikrei: { cursor: blue, color: 'blue' },\n  Din: { cursor: green, color: 'green' },\n  Taahm: { cursor: pink, color: 'pink' },\n  Koteret: { cursor: purple, color: 'purple' },\n  אמירה: { cursor: red, color: 'red' },\n  שאלה: { cursor: yellow, color: 'yellow' },\n  תשובה: { cursor: blue, color: 'blue' },\n  קושיא: { cursor: green, color: 'green' },\n  תירוץ: { cursor: pink, color: 'pink' },\n  ראיה: { cursor: purple, color: 'purple' },\n  סיוע: { cursor: yellow, color: 'yellow' },\n};\n\nconst LAYOUT = {\n  mishnah: ['Mikrei', 'Din', 'Taahm', 'Koteret'],\n  talmud: ['אמירה', 'שאלה', 'תשובה', 'קושיא', 'תירוץ', 'ראיה', 'סיוע'],\n};\n\nexport const NodeMenuId = 'node_menu';\n\nexport default function GraphContextMenu() {\n  // updates State and changes cursor color\n  const handleClick = (event, data, element) => {\n    const { target, mode, dispatch } = data;\n    const { id } = target;\n    // document.body.style.cursor = `url(${cursor}), auto`;\n    dispatch({ type: 'setMode', payload: { mode, id } });\n  };\n  const dispatch = useDispatch();\n\n  return (\n    <ContextMenu id={NodeMenuId} className=\"context-menu\">\n      {Object.keys(LAYOUT).map((book) => (\n        <SubMenu title={book} key={book}>\n          {LAYOUT[book].map((mode) => (\n            <MenuItem\n              onClick={handleClick}\n              data={{ mode, dispatch }}\n              key={mode}\n            >\n              {mode}\n            </MenuItem>\n          ))}\n        </SubMenu>\n      ))}\n    </ContextMenu>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApwAAAKcBDzod3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEmSURBVDiN1dNLK8RRFADw3zzkVcqQkgWpYUE2ymMhvoCyUJS98kl8A6XsbGWlpEjNapJEHqU0jNKMhoWUaKZYjKTJZGb+Ns7unnPvr3M6Xf5rzGO7lofhMvnIMPUhDv4KtMzjMdkolwgFBkOEh5i6Id3AHeoCgeHPWhdjd5w3kUNzEPBrzBijD1zEuEdbYBAaGcxy2kEa3VWDflhEHQMZrro5wWC1YLkOeq/J9rOHidJ6tFIox+kSLde0Z4g/FNPr6KmqwxSJaZ5aiW4SPqIzQyRPpBT7FTxkP07vFqk8LzPk0VnpVN9jYZwEkp/nvkWSz+yq8Y/PYed7Ikr2nYsRbtFYC1oas2tsp9nC6l+AWnk7YwPv5e5EqgFfKawUFzmJQsD+KosPAjpB0C8TyesAAAAASUVORK5CYII=\"","import { useSelector, useDispatch } from 'react-redux';\nimport { ContextMenuTrigger } from 'react-contextmenu';\nimport React from 'react';\nimport Draggable from 'react-draggable';\nimport { NodeMenuId } from './GraphContextMenu';\nimport './css/Nodes.css';\nimport { convertFromRaw } from 'draft-js';\n\nconst Node = (id, position, txt, dispatch) => {\n  const handleDrag = (e, d) => {\n    dispatch({\n      type: 'updatePosition',\n      payload: {\n        id: e.srcElement.id,\n        x: d.lastX + d.deltaX,\n        y: d.lastY + d.deltaY,\n      },\n    });\n  };\n  const [x, y] = position;\n  return (\n    <ContextMenuTrigger id={NodeMenuId} key={id}>\n      <Draggable\n        onStop={handleDrag}\n        onDrag={handleDrag}\n        key={id}\n        defaultPosition={{ x, y }}\n      >\n        <div className=\"node\" id={id}>\n          {convertFromRaw(JSON.parse(txt)).getPlainText()}\n        </div>\n      </Draggable>\n    </ContextMenuTrigger>\n  );\n};\n\nexport default function Nodes() {\n  const dispatch = useDispatch();\n  const positions = useSelector((state) => state.blocks.present.positions);\n  const order = useSelector((state) => state.blocks.present.order);\n  const txts = useSelector((state) => state.blocks.present.txts);\n\n  const nodes = order.map((id) => Node(id, positions[id], txts[id], dispatch));\n  return nodes;\n}\n","import { useSelector } from 'react-redux';\nimport React from 'react';\nimport Xarrow from 'react-xarrows';\n\nexport default function SequentialPath() {\n  const order = useSelector((state) => state.blocks.present.order);\n  // triggers re-render on state change\n  const positions = useSelector((state) => state.blocks.present.positions);\n\n  const links = {};\n  for (let i = 0; i < order.length - 1; i += 1) {\n    links[order[i]] = order[i + 1];\n  }\n\n  const path = [];\n  Object.keys(links).forEach((key) =>\n    path.push(\n      <Xarrow\n        key={key}\n        start={key}\n        end={links[key]}\n        strokeWidth={1}\n        lineColor=\"grey\"\n        headColor=\"grey\"\n        dashness\n      />\n    )\n  );\n  return path;\n}\n","import React from 'react';\nimport { ContextMenu, MenuItem } from 'react-contextmenu';\nimport { useDispatch } from 'react-redux';\n\nexport const ConnectionMenuId = 'connection_menu';\n\nexport default function ConnectionContextMenu() {\n  // updates State and changes cursor color\n  const handleClick = (event, data, element) => {\n    const { target, reducerType, dispatch } = data;\n    const { id } = target.parentElement.parentElement;\n    dispatch({ type: reducerType, payload: {id}  });\n  };\n  const dispatch = useDispatch();\n  return (\n    <ContextMenu id={ConnectionMenuId}>\n        <MenuItem\n          onClick={handleClick}\n          data={{reducerType: \"deleteConnection\", dispatch: dispatch}}\n          key='deleteConnection'\n          >\n          {\"Delete\"}\n        </MenuItem>\n    </ContextMenu>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nfunction onClick(event, graph, dispatch) {\n  switch (event.target.classList[0]) {\n    case 'react-contextmenu-item': {\n      // Entered Connection Mode\n      break;\n    }\n    case 'node': {\n      if (graph.selectedNode !== null) {\n        // console.log('In Connection Mode');\n        if (graph.selectedNode === event.target.id) {\n          // console.log('Same ID Clicked');\n        } else if (\n          graph.connections.includes([graph.selectedNode, event.target.id])\n        ) {\n          // console.log('Connection Already in Present');\n        } else {\n          dispatch({\n            type: 'addConnection',\n            payload: {\n              connection: [graph.selectedNode, event.target.id, graph.mode],\n            },\n          });\n        }\n      }\n      dispatch({ type: 'resetMode' });\n      break;\n    }\n    default:\n      dispatch({ type: 'resetMode' });\n      break;\n  }\n}\n\nexport default function ConnectionListener() {\n  const graph = useSelector((state) => state.blocks.present.graph);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    function f(e) {\n      return onClick(e, graph, dispatch);\n    }\n    document.addEventListener('click', f);\n    return () => {\n      document.removeEventListener('click', f);\n    };\n  }, [graph]);\n  return <></>;\n}\n","import { useSelector } from 'react-redux';\nimport { ContextMenuTrigger } from 'react-contextmenu';\nimport React from 'react';\nimport Xarrow from 'react-xarrows';\nimport { MODES } from './GraphContextMenu';\nimport { ConnectionMenuId } from './ConnectionContextMenu';\nimport './css/Connections.css';\n\nexport default function NodeConnections() {\n  const connections = useSelector(\n    (state) => state.blocks.present.graph.connections\n  );\n  // triggers re-render on state change\n  const positions = useSelector((state) => state.blocks.present.positions);\n  const anchors = {};\n  return connections.map((connection) => {\n    const start = connection[0];\n    const end = connection[1];\n    const mode = connection[2];\n\n    anchors.hasOwnProperty(start)\n      ? (anchors[start] += 1)\n      : (anchors[start] = 0);\n    anchors.hasOwnProperty(end) ? (anchors[end] += 1) : (anchors[end] = 0);\n\n    // console.log(anchors);\n    let sideStartOffset = anchors[start];\n    if (sideStartOffset % 2 === 0) {\n      sideStartOffset /= -2;\n    } else {\n      sideStartOffset += 1;\n      sideStartOffset /= 2;\n    }\n    let sideEndOffset = anchors[end];\n    if (sideEndOffset % 2 === 0) {\n      sideEndOffset /= -2;\n    } else {\n      sideEndOffset += 1;\n      sideEndOffset /= 2;\n    }\n    // console.log(anchors)\n\n    const longStartOffset = anchors[start];\n\n    const yspacing = 10;\n    const xspacing = 10;\n\n    return (\n      <ContextMenuTrigger id={ConnectionMenuId} key={start + end + mode}>\n        <Xarrow\n          key={start + end + mode}\n          id={start + end + mode}\n          start={start}\n          end={end}\n          startAnchor={[\n            {\n              position: 'right',\n              offset: { bottomness: yspacing * sideStartOffset, rightness: 0 },\n            },\n            {\n              position: 'left',\n              offset: { bottomness: yspacing * sideStartOffset, rightness: 0 },\n            },\n            {\n              position: 'bottom',\n              offset: { bottomness: 0, rightness: xspacing * sideStartOffset },\n            },\n            {\n              position: 'top',\n              offset: { bottomness: 0, rightness: xspacing * sideStartOffset },\n            },\n          ]}\n          endAnchor={[\n            {\n              position: 'right',\n              offset: { bottomness: yspacing * sideEndOffset, rightness: 0 },\n            },\n            {\n              position: 'left',\n              offset: { bottomness: yspacing * sideEndOffset, rightness: 0 },\n            },\n            {\n              position: 'bottom',\n              offset: { bottomness: 0, rightness: xspacing * sideEndOffset },\n            },\n            {\n              position: 'top',\n              offset: { bottomness: 0, rightness: xspacing * sideEndOffset },\n            },\n          ]}\n          strokeWidth={3}\n          headSize={5}\n          lineColor={MODES[mode].color}\n          headColor={MODES[mode].color}\n          arrowBodyProps={{ className: 'arrow_body' }}\n          arrowHeadProps={{ className: 'arrow_head' }}\n          SVGcanvasProps={{ className: 'svg' }}\n          // path=\"grid\"\n          label={{\n            middle: (\n              <div\n                className=\"arrow_label\"\n                style={{\n                  color: MODES[mode].color,\n                  transform: 'translate(100%, 0%)',\n                }}\n              >\n                {mode[0]}\n              </div>\n            ),\n          }}\n        />\n      </ContextMenuTrigger>\n    );\n  });\n}\n","import './App.css';\nimport React from 'react';\nimport Blocks from './features/blocks/Blocks';\nimport HeaderButtons from './features/HeaderButtons/HeaderButtons';\nimport Graph from './features/graph/Graph';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <div className=\"graph\">{Graph()}</div>\n      <div className=\"right_panel\">\n        <HeaderButtons />\n        <Blocks />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport './css/Graph.css';\nimport Nodes from './Nodes';\nimport SequentialPath from './SequentialPath';\nimport GraphContextMenu from './GraphContextMenu';\nimport ConnectionContextMenu from './ConnectionContextMenu'\nimport ConnectionListener from './ConnectionListener';\nimport NodeConnections from './Connections';\n\nexport default function Graph() {\n  return (\n    <>\n      <div className=\"canvas\">\n        <Nodes />\n        <SequentialPath />\n        <NodeConnections />\n      </div>\n      <GraphContextMenu />\n      <ConnectionContextMenu />\n      <ConnectionListener />\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { nanoid } from '@reduxjs/toolkit';\nimport {\n  EditorState,\n  SelectionState,\n  convertToRaw,\n  convertFromRaw,\n  Modifier,\n} from 'draft-js';\n\nconst initialState = {\n  caret: -1,\n  activeId: 'id1',\n  order: ['id1'],\n  txts: {\n    id1: JSON.stringify(\n      convertToRaw(EditorState.createEmpty().getCurrentContent())\n    ),\n  },\n  splits: { id1: { slice1: 0, slice2: 0 } },\n  selections: {\n    id1: { anchorKey: 0, anchorOffset: 0, focusKey: 0, focusOffset: 0 },\n  },\n  notes: { id1: '' },\n  views: { id1: false },\n  positions: { id1: [0, 0] },\n  graph: { connections: [], mode: null, selectedNode: null },\n};\n\nexport default function BlocksReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'updateId':\n      return {\n        ...state,\n        caret: action.payload.caret,\n        activeId: action.payload.id,\n      };\n    case 'updateText':\n      return {\n        ...state,\n        txts: { ...state.txts, [action.payload.id]: action.payload.txt },\n        splits: { ...state.splits, [action.payload.id]: action.payload.split },\n        selections: {\n          ...state.selections,\n          [action.payload.id]: action.payload.selection,\n        },\n      };\n    case 'updateSelection':\n      return {\n        ...state,\n        splits: { ...state.splits, [action.payload.id]: action.payload.split },\n        selections: {\n          ...state.selections,\n          [action.payload.id]: action.payload.selection,\n        },\n      };\n    case 'splitText': {\n      // Initialize ids, texts, and order\n      const id1 = action.payload.id;\n      const index = state.order.indexOf(id1);\n      const id2 = nanoid();\n      const textOne = state.splits[id1]['slice1'];\n      const textTwo = state.splits[id1]['slice2'];\n      const newOrder = [...state.order];\n      newOrder.splice(index + 1, 0, id2);\n\n      // Set new position of node in graph\n      const pos = state.positions[id1];\n      const newPosition = [pos[0], pos[1] + 100];\n      return {\n        ...state,\n        activeId: id2,\n        order: newOrder,\n        txts: {\n          ...state.txts,\n          [id1]: textOne,\n          [id2]: textTwo,\n        },\n        splits: {\n          ...state.splits,\n          [id1]: { slice1: 0, slice2: 0 },\n          [id2]: { slice1: 0, slice2: 0 },\n        },\n        notes: { ...state.notes, [id2]: '' },\n        views: { ...state.views, [id2]: false },\n        positions: { ...state.positions, [id2]: newPosition },\n      };\n    }\n    case 'mergeText': {\n      const id2 = action.payload.id;\n      const idx = state.order.indexOf(id2);\n      if (idx === 0) {\n        return state; // not possible to merge up first block\n      }\n      const id1 = state.order[idx - 1];\n      const newOrder = [...state.order];\n      newOrder.splice(idx, 1);\n\n      // Move merged connections\n      let newConnections = state.graph.connections\n        .map((connection) =>\n          connection.map((id) => {\n            if (id === id2) {\n              return id1;\n            }\n            return id;\n          })\n        )\n        .filter((connection) => connection[0] !== connection[1]);\n      // Remove Duplicate connections\n      const s = new Set(newConnections.map((array) => array.join()));\n      newConnections = [...s].map((array) => array.split(','));\n\n      // Creates Merged Content State\n      const contentState1 = convertFromRaw(JSON.parse(state.txts[id1]));\n      const contentState2 = convertFromRaw(JSON.parse(state.txts[id2]));\n      const selectionState2 = EditorState.createWithContent(\n        contentState2\n      ).getSelection();\n      const firstBlockKey = selectionState2.getAnchorKey();\n      const insertionSelectionState = SelectionState.createEmpty(\n        'blockkey'\n      ).merge({\n        anchorKey: firstBlockKey,\n        anchorOffset: 0,\n        focusKey: firstBlockKey,\n        focusOffset: 0,\n      });\n      const mergedContent = Modifier.replaceWithFragment(\n        contentState2,\n        insertionSelectionState,\n        contentState1.getBlockMap()\n      );\n\n      return {\n        ...state,\n        activeId: id1,\n        order: newOrder,\n        txts: {\n          ...state.txts,\n          [id1]: JSON.stringify(convertToRaw(mergedContent)),\n        },\n        splits: {\n          ...state.splits,\n          [id1]: { slice1: 0, slice2: 0 },\n        },\n        notes: {\n          ...state.notes,\n          [id1]: state.notes[id1] + state.notes[id2],\n        },\n        graph: { ...state.graph, connections: newConnections },\n      };\n    }\n    case 'toggleNote': {\n      const { id } = action.payload;\n      return { ...state, views: { ...state.views, [id]: !state.views[id] } };\n    }\n    case 'updateNote': {\n      const { id } = action.payload;\n      const e = document.activeElement;\n      return { ...state, notes: { ...state.notes, [id]: e.value } };\n    }\n    case 'updatePosition': {\n      const { id, x, y } = action.payload;\n      return { ...state, positions: { ...state.positions, [id]: [x, y] } };\n    }\n    case 'setMode':\n      return {\n        ...state,\n        graph: {\n          ...state.graph,\n          mode: action.payload.mode,\n          selectedNode: action.payload.id,\n        },\n      };\n    case 'resetMode':\n      return {\n        ...state,\n        graph: { ...state.graph, mode: null, selectedNode: null },\n        mode: '',\n        id: null,\n      };\n    case 'addConnection':\n      // Verify that connection does not already exist\n      if (\n        state.graph.connections.filter(\n          (c) => c.toString() === action.payload.connection.toString()\n        ).length > 0 &&\n        state.graph.connections.length > 0\n      ) {\n        return state;\n      }\n      // Add connection\n      return {\n        ...state,\n        graph: {\n          ...state.graph,\n          connections: [...state.graph.connections, action.payload.connection],\n        },\n      };\n    case 'deleteConnection': {\n      const newConnections = state.graph.connections.filter(\n        (connection) =>\n          connection[0] + connection[1] + connection[2] !== action.payload.id\n      );\n      return {\n        ...state,\n        graph: { ...state.graph, connections: newConnections },\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport const ArgButtonsSlice = createSlice({\n  name: 'args',\n  initialState: {\n    connection_color: null, // color of current selected arrow type\n    tail_selected: false, // specifies if prior click was on valid node\n    tail_id: null, // id of prior node click\n  },\n  reducers: {\n    updateColor: (state, action) => {\n      state.connection_color = action.color;\n      state.tail_selected = false;\n      state.tail_id = null;\n    },\n    updateTail: (state, action) => {\n      state.tail_selected = true;\n      state.tail_id = action.id;\n    },\n    resetToDragging: (state) => {\n      state.connection_color = null;\n      state.tail_selected = false;\n      state.tail_id = null;\n    },\n  },\n});\n\nexport const {\n  updateColor,\n  updateTail,\n  resetToDragging,\n} = ArgButtonsSlice.actions;\nexport default ArgButtonsSlice.reducer;\n","import { configureStore } from '@reduxjs/toolkit';\nimport undoable, { excludeAction } from 'redux-undo';\nimport blocksReducer from '../features/blocks/BlocksReducer';\nimport ArgsButtonsReducer from '../features/ArgButtons/ArgButtonsSlice';\n\nexport default configureStore({\n  reducer: {\n    blocks: undoable(blocksReducer, {\n      filter: excludeAction([\n        'updateId',\n        'updateCaret',\n        'updatePosition',\n        'toggleNote',\n        'updateNote',\n        'resetMode',\n        'setMode',\n        'updateSelection',\n      ]),\n    }),\n    args: ArgsButtonsReducer,\n  },\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from './app/store';\n\nReactDOM.render(\n  // <React.StrictMode>\n  //   <App />\n  // </React.StrictMode>,\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}