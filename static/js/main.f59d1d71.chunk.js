(this["webpackJsonplove-the-args"]=this["webpackJsonplove-the-args"]||[]).push([[0],{111:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},224:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(26),r=n.n(o),a=(n(111),n(4)),s=(n(117),n(118),n(15)),i=n(1),l={"\u05de\u05e7\u05e8\u05d4":{color:"#222255",types:["arrow","box"]},"\u05d3\u05d9\u05df":{color:"#222255",types:["arrow"]},"\u05d8\u05e2\u05dd":{color:"#222255",types:["arrow"]},"\u05db\u05d5\u05ea\u05e8\u05ea":{color:"#222255",types:["arrow","box"]},"\u05de\u05e2\u05e9\u05d4":{color:"#222255",types:["arrow","box"]},"\u05db\u05dc\u05dc":{color:"#222255",types:["arrow","box"]},"\u05d0\u05de\u05d9\u05e8\u05d4":{color:"#ee6677",types:["arrow","box"]},"\u05e9\u05d0\u05dc\u05d4":{color:"#ee6677",types:["arrow","box"]},"\u05ea\u05e9\u05d5\u05d1\u05d4":{color:"#ee6677",types:["arrow"]},"\u05e7\u05d5\u05e9\u05d9\u05d0":{color:"#ee6677",types:["arrow"]},"\u05ea\u05d9\u05e8\u05d5\u05e5":{color:"#ee6677",types:["arrow"]},"\u05e8\u05d0\u05d9\u05d4":{color:"#ee6677",types:["arrow"]},"\u05e1\u05d9\u05d5\u05e2":{color:"#ee6677",types:["arrow"]},"\u05d0\u05d2\u05d3\u05ea\u05d0":{color:"#ee6677",types:["arrow","box"]},"\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0":{color:"#ee6677",types:["arrow"]},"\u05de\u05d7\u05dc\u05d5\u05e7\u05ea":{color:"#ee6677",types:["arrow","box"]}},d={Tannaitic:["\u05de\u05e7\u05e8\u05d4","\u05d3\u05d9\u05df","\u05d8\u05e2\u05dd","\u05db\u05d5\u05ea\u05e8\u05ea","\u05de\u05e2\u05e9\u05d4","\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0","\u05db\u05dc\u05dc"],Talmud:["\u05d0\u05de\u05d9\u05e8\u05d4","\u05e9\u05d0\u05dc\u05d4","\u05ea\u05e9\u05d5\u05d1\u05d4","\u05e7\u05d5\u05e9\u05d9\u05d0","\u05ea\u05d9\u05e8\u05d5\u05e5","\u05e8\u05d0\u05d9\u05d4","\u05e1\u05d9\u05d5\u05e2","\u05d0\u05d2\u05d3\u05ea\u05d0","\u05d0\u05d5\u05e7\u05d9\u05de\u05ea\u05d0","\u05de\u05d7\u05dc\u05d5\u05e7\u05ea"]},b="node_menu";function u(){var e=function(e,t,n){t.target;var c=t.label,o=t.type,r=t.dispatch,a=n.firstChild.id;r("arrow"===o?{type:"setMode",payload:{label:c,id:a}}:{type:"setBox",payload:{label:c,id:a}})},t=Object(a.b)();return Object(i.jsxs)(s.a,{id:b,className:"context-menu",hideOnLeave:!0,children:[Object(i.jsx)(s.c,{onClick:function(e,t,n){t.target;(0,t.dispatch)({type:"removeBox",payload:{id:n.firstChild.id}})},data:{dispatch:t},children:"Remove Box"},"remove"),Object.keys(d).map((function(n){return Object(i.jsx)(s.d,{title:n,children:d[n].map((function(n){return Object(i.jsx)(s.d,{title:n,children:l[n].types.map((function(c){return Object(i.jsx)(s.c,{onClick:e,data:{label:n,type:c,dispatch:t},children:c},c)}))},n)}))},n)}))]})}var j="connection_menu";function O(){var e=Object(a.b)();return Object(i.jsx)(s.a,{id:j,children:Object(i.jsx)(s.c,{onClick:function(e,t,n){var c=t.target,o=t.reducerType;(0,t.dispatch)({type:o,payload:{id:c.parentElement.parentElement.id}})},data:{reducerType:"deleteConnection",dispatch:e},children:"Delete"},"deleteConnection")})}function p(e){return e!==document&&(e.classList.contains("react-contextmenu-item")||e.classList.contains("node")?e:p(e.parentNode))}function f(e,t,n){var c=p(e.target);!1===c?n({type:"resetMode"}):"react-contextmenu-item"===c.classList[0]||"node"===c.classList[0]&&(null!==t.selectedNode&&(t.selectedNode===c.id||t.connections.includes([t.selectedNode,c.id])||n({type:"addConnection",payload:{connection:[t.selectedNode,c.id,t.mode]}})),n({type:"resetMode"}))}function y(){var e=Object(a.c)((function(e){return e.blocks.present.graph})),t=Object(a.b)();return Object(c.useEffect)((function(){function n(n){return f(n,e,t)}return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[e]),Object(i.jsx)(i.Fragment,{})}var g=n(27),h=n.n(g),m=n(105),v=n.n(m),x=(n(51),n(106)),S=n.n(x);function C(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.notes[t]})),c=Object(a.c)((function(e){return e.blocks.present.views[t]})),o=Object(a.b)();return!1===c||void 0===c?Object(i.jsx)("div",{}):Object(i.jsx)(v.a,{id:t,className:"note",onSelect:function(){return o({type:"updateNote",payload:{id:t}})},onChange:function(){return o({type:"updateNote",payload:{id:t}})},onClick:function(e){if(e.ctrlKey||e.metaKey||e.shiftKey)return 0;o({type:"updateNote",payload:{id:t}})},value:n})}function A(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.views[t]})),c=Object(a.b)();return Object(i.jsx)(S.a,{checked:n,onChange:function(){return c({type:"toggleNote",payload:{id:t}})},uncheckedIcon:!1,checkedIcon:!1,className:"switch",onColor:"#222255",onHandleColor:"#ffffff",offColor:"#888888",boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 1px rgba(0, 0, 0, 0.2)",height:10,width:20})}var k=n(21),N=n(5);function w(e){var t=e.getSelection().getAnchorOffset(),n=e.getCurrentContent().getPlainText().length,c=e.getSelection().getAnchorKey(),o=e.getCurrentContent().getLastBlock().key,r=e.getCurrentContent().getFirstBlock().key,a=N.SelectionState.createEmpty("blockkey").merge({anchorKey:c,anchorOffset:t,focusOffset:n,focusKey:o}),s=N.SelectionState.createEmpty("blockkey").merge({anchorKey:r,anchorOffset:0,focusKey:c,focusOffset:t}),i=N.Modifier.removeRange(e.getCurrentContent(),s,"forward"),l=N.Modifier.removeRange(e.getCurrentContent(),a,"forward");return{slice1:JSON.stringify(Object(N.convertToRaw)(l)),slice2:JSON.stringify(Object(N.convertToRaw)(i))}}function E(e){var t=e.getSelection();return{anchorKey:t.getAnchorKey(),anchorOffset:t.getAnchorOffset(),focusKey:t.getFocusKey(),focusOffset:t.getFocusOffset(),isBackward:t.isBackward}}function T(e){var t=e.anchorKey,n=e.anchorOffset,c=e.focusKey,o=e.focusOffset,r=e.isBackward;return N.SelectionState.createEmpty("blockkey").merge({anchorKey:t,anchorOffset:n,focusKey:c,focusOffset:o,isBackward:r})}var M={TANNA:{backgroundColor:"#BBCCEE"},AMORA:{backgroundColor:"#ccddaa"},STAM:{backgroundColor:"#ffcccc"},AMORA_MIDRASH:{backgroundColor:"#BBCCEE",borderBottom:".2em solid #228833"},STAM_MIDRASH:{backgroundColor:"#BBCCEE",borderBottom:".2em solid #ee6677"},STAM_AMORA:{backgroundColor:"#ccddaa",borderBottom:".2em solid #ee6677"},TANAKH:{fontWeight:"bold"},CLEAR:{color:"black"}};function R(e){var t=e.id,n=Object(a.c)((function(e){return e.blocks.present.txts[t]})),o=Object(a.b)(),r=Object(a.c)((function(e){return e.blocks.present.selections[t]})),s=N.EditorState.createWithContent(Object(N.convertFromRaw)(JSON.parse(n))),l=null;l=null==r?N.SelectionState.createEmpty():T(r);var d=N.EditorState.forceSelection(s,l),b=Object(c.useState)((function(){return N.EditorState.forceSelection(s,l)})),u=Object(k.a)(b,2),j=u[0],O=u[1];n!==JSON.stringify(Object(N.convertToRaw)(j.getCurrentContent()))&&O(d);var p=Object(a.c)((function(e){return e.blocks.present.activeId})),f=Object(c.useRef)();return Object(c.useEffect)((function(){p===t&&f.current.focus()})),Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"text-editor",id:t,onBlur:function(){return o({type:"updateId",payload:{id:null}})},children:Object(i.jsx)(N.Editor,{ref:f,customStyleMap:M,editorState:j,onChange:function(e){var n=e.getCurrentContent().getPlainText()===j.getCurrentContent().getPlainText();O(e),o(n?{type:"updateSelection",payload:{id:t,split:w(e),selection:E(e)}}:{type:"updateText",payload:{id:t,txt:JSON.stringify(Object(N.convertToRaw)(e.getCurrentContent())),split:w(e),selection:E(e)}})}})})})}function B(){var e=Object(a.c)((function(e){return e.blocks.present.order})).map((function(e){return Object(i.jsxs)("div",{className:"block",children:[Object(i.jsx)(R,{id:e}),Object(i.jsx)(A,{id:e}),Object(i.jsx)(C,{id:e})]},e)}));return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(h.a,{handle:"#drag-bar-blocks",children:Object(i.jsxs)("div",{id:"blocks",children:[Object(i.jsx)("div",{id:"drag-bar-blocks"}),e]})})})}n(224);var _=n(29),D=n.n(_),I=function(e,t){var n=e.getCurrentContent(),c=t.reduce((function(t,n){return N.Modifier.removeInlineStyle(t,e.getSelection(),n)}),n);return N.EditorState.push(e,c,"change-inline-style")},K=["TANNA","AMORA","AMORA_MIDRASH","STAM","STAM_MIDRASH","STAM_AMORA","CLEAR","TANAKH"],J=["TANNA","AMORA","AMORA_MIDRASH","STAM","STAM_MIDRASH","STAM_AMORA","CLEAR"];function F(){var e=Object(a.b)();return Object(i.jsx)("button",{type:"button",onMouseDown:function(t){if(t.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var n=document.activeElement.parentElement.parentElement.parentElement.id;e({type:"mergeText",payload:{id:n}})}},children:"merge"})}function P(){var e=Object(a.b)();return Object(i.jsx)("button",{type:"button",onMouseDown:function(t){if(t.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var n=document.activeElement.parentElement.parentElement.parentElement.id;e({type:"splitText",payload:{id:n}})}},children:"split"})}function L(){var e=Object(a.b)();return Object(i.jsx)("button",{type:"button",onClick:function(){return e(_.ActionCreators.redo())},children:"redo"})}function H(){var e=Object(a.b)();return Object(i.jsx)("button",{type:"button",onClick:function(){e(_.ActionCreators.undo())},children:"undo"})}function W(e){var t=Object(a.b)(),n=Object(a.c)((function(e){return e.blocks.present.txts})),c=Object(a.c)((function(e){return e.blocks.present.selections}));return Object(i.jsx)("button",{style:M[e.dataStyle],type:"button","data-style":e.dataStyle,onMouseUp:function(e){return e.preventDefault()},onMouseDown:function(o){if(o.preventDefault(),"notranslate public-DraftEditor-content"===document.activeElement.getAttribute("class")){var r=o.currentTarget.getAttribute("data-style"),a=document.activeElement.parentElement.parentElement.parentElement.id,s=Object(N.convertFromRaw)(JSON.parse(n[a])),i=T(c[a]),l=N.EditorState.createWithContent(s);l=N.EditorState.acceptSelection(l,i);var d=JSON.stringify(l.getCurrentContent().getBlockMap());if(e.clearer?l=I(l,K):e.layerable||(l=function(e){return I(e,J)}(l)),l=N.RichUtils.toggleInlineStyle(l,r),d!=JSON.stringify(l.getCurrentContent().getBlockMap())){var b=w(l),u=l.getCurrentContent().getFirstBlock().getKey();i=T({anchorKey:u,anchorOffset:0,focusKey:u,focusOffset:0,isBackward:!1}),l=N.EditorState.forceSelection(l,i),t({type:"updateText",payload:{id:a,txt:JSON.stringify(Object(N.convertToRaw)(l.getCurrentContent())),split:b,selection:E(l)}})}}},children:e.name})}function U(){return Object(i.jsxs)("div",{className:"header_buttons",children:[Object(i.jsx)(H,{}),Object(i.jsx)(L,{}),Object(i.jsx)(F,{}),Object(i.jsx)(P,{}),Object(i.jsx)(W,{dataStyle:"TANNA",name:"Tannaitic"}),Object(i.jsx)(W,{dataStyle:"AMORA",name:"Amoraic"}),Object(i.jsx)(W,{dataStyle:"STAM",name:"Stam"}),Object(i.jsx)(W,{dataStyle:"AMORA_MIDRASH",name:"T from A"}),Object(i.jsx)(W,{dataStyle:"STAM_MIDRASH",name:"T from S"}),Object(i.jsx)(W,{dataStyle:"STAM_AMORA",name:"A from S"}),Object(i.jsx)(W,{dataStyle:"TANAKH",name:"Tanakh",layerable:!0}),Object(i.jsx)(W,{dataStyle:"CLEAR",name:"Clear",clearer:!0})]})}n(227),n(228),n(229);var X=function(e){var t=e.id,n=Object(a.b)(),c=Object(a.c)((function(e){return e.blocks.present.positions[t]})),o=Object(a.c)((function(e){return e.blocks.present.txts[t]})),r=Object(a.c)((function(e){return e.blocks.present.graph.boxes[t]})),d={};Object(a.c)((function(e){return e.blocks.present.graph.selectedNode}))===t&&(d={borderColor:"gold",backgroundColor:"gold"});var u="";r?(u=l[r].color,d.borderColor=u):u="";var j=function(e,c){n({type:"updatePosition",payload:{id:t,x:c.lastX+c.deltaX,y:c.lastY+c.deltaY}})},O=Object(k.a)(c,2),p=O[0],f=O[1];return Object(i.jsx)(s.b,{id:b,holdToDisplay:-1,children:Object(i.jsx)(h.a,{onStop:j,onDrag:j,defaultPosition:{x:p,y:f},position:{x:p,y:f},bounds:{left:0,top:0},children:Object(i.jsxs)("fieldset",{className:"node",id:t,style:d,children:[Object(i.jsx)("legend",{className:"label",style:{color:u},children:r}),Object(i.jsx)(N.Editor,{readOnly:!0,customStyleMap:M,editorState:N.EditorState.createWithContent(Object(N.convertFromRaw)(JSON.parse(o))),onChange:function(){}})]})},t)},t)};function Y(){return Object(a.c)((function(e){return e.blocks.present.order})).map((function(e){return Object(i.jsx)(X,{id:e},e)}))}var z=n(49),G=n.n(z);function V(){for(var e=Object(a.c)((function(e){return e.blocks.present.order})),t=(Object(a.c)((function(e){return e.blocks.present.positions})),{}),n=0;n<e.length-1;n+=1)t[e[n]]=e[n+1];var c=[];return Object.keys(t).forEach((function(e){return c.push(Object(i.jsx)(G.a,{start:e,end:t[e],strokeWidth:1,lineColor:"grey",headColor:"grey",dashness:!0},e))})),c}n(232);function q(){var e=Object(a.c)((function(e){return e.blocks.present.graph.connections})),t=(Object(a.c)((function(e){return e.blocks.present.positions})),{});return e.map((function(e){var n=e[0],c=e[1],o=e[2];t.hasOwnProperty(n)?t[n]+=1:t[n]=1,t.hasOwnProperty(c)?t[c]+=1:t[c]=1;var r=t[n];r%2===0?r/=-2:(r+=1,r/=2);var a=t[c];a%2===0?a/=-2:(a+=1,a/=2);t[n];return Object(i.jsx)(s.b,{id:j,children:Object(i.jsx)(G.a,{id:n+c+o,start:n,end:c,startAnchor:[{position:"right",offset:{bottomness:10*r,rightness:0}},{position:"left",offset:{bottomness:10*r,rightness:0}},{position:"bottom",offset:{bottomness:0,rightness:10*r}},{position:"top",offset:{bottomness:0,rightness:10*r}}],endAnchor:[{position:"right",offset:{bottomness:10*a,rightness:0}},{position:"left",offset:{bottomness:10*a,rightness:0}},{position:"bottom",offset:{bottomness:0,rightness:10*a}},{position:"top",offset:{bottomness:0,rightness:10*a}}],strokeWidth:2,headSize:3,lineColor:l[o].color,headColor:l[o].color,arrowBodyProps:{className:"arrow_body"},arrowHeadProps:{className:"arrow_head"},SVGcanvasProps:{className:"svg"},label:{middle:Object(i.jsx)("div",{className:"arrow_label",style:{color:l[o].color,transform:"translate(100%, 0%)"},children:o[0]})}},n+c+o)},n+c+o)}))}function Q(){var e=Object(c.useState)({});Object(k.a)(e,2)[1];return Object(i.jsx)(h.a,{handle:".drag-bar",children:Object(i.jsxs)("div",{className:"graph",children:[Object(i.jsx)("div",{className:"drag-bar"}),Object(i.jsx)("div",{className:"canvas",children:Object(i.jsx)(Y,{})}),Object(i.jsx)(V,{}),Object(i.jsx)(q,{})]})})}n(233);function Z(){var e=Object(a.c)((function(e){return e.blocks.present})),t=Object(c.useState)(""),n=Object(k.a)(t,2),o=n[0],r=n[1];return Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),c=document.createElement("a");c.setAttribute("href",n),c.setAttribute("download",t+".json"),document.body.appendChild(c),c.click(),c.remove()}(e,o)},children:[Object(i.jsxs)("label",{children:["Save File ",Object(i.jsx)("input",{type:"text",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(i.jsx)("input",{type:"submit",value:"Save"})]})}function $(){var e=Object(a.b)();return Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=document.getElementById("file").files[0];if(n){var c=new FileReader;c.readAsText(n),c.onload=function(){var t=JSON.parse(c.result);console.log(t),e({type:"loadState",payload:{state:t}})}}},children:[Object(i.jsx)("input",{type:"file",id:"file",name:"file",className:"inputfile"}),Object(i.jsx)("input",{type:"submit",value:"Load"})]})}var ee=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(u,{}),Object(i.jsx)(O,{}),Object(i.jsx)(y,{}),Object(i.jsxs)("div",{className:"top",children:[Object(i.jsxs)("div",{className:"load_save_buttons",children:[Object(i.jsx)(Z,{}),Object(i.jsx)($,{})]}),Object(i.jsx)("div",{className:"right_buttons",children:Object(i.jsx)(U,{})})]}),Object(i.jsxs)("div",{className:"bottom",children:[Object(i.jsx)("div",{className:"left-panel",children:Object(i.jsx)(Q,{})}),Object(i.jsx)("div",{className:"right-panel",children:Object(i.jsx)(B,{})})]})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,235)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))},ne=n(28),ce=n(36),oe=n(10),re=n(2),ae={caret:-1,activeId:"id1",order:["id1"],txts:{id1:JSON.stringify(Object(N.convertToRaw)(N.EditorState.createEmpty().getCurrentContent()))},splits:{id1:{slice1:0,slice2:0}},selections:{id1:null},notes:{id1:""},views:{id1:!1},positions:{id1:[0,0]},graph:{connections:[],mode:null,selectedNode:null,boxes:{}}};var se=Object(ne.b)({name:"args",initialState:{connection_color:null,tail_selected:!1,tail_id:null},reducers:{updateColor:function(e,t){e.connection_color=t.color,e.tail_selected=!1,e.tail_id=null},updateTail:function(e,t){e.tail_selected=!0,e.tail_id=t.id},resetToDragging:function(e){e.connection_color=null,e.tail_selected=!1,e.tail_id=null}}}),ie=se.actions,le=(ie.updateColor,ie.updateTail,ie.resetToDragging,se.reducer),de=Object(ne.a)({reducer:{blocks:D()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loadState":var n=t.payload.state.positions,c=Object.keys(n).reduce((function(e,t){return Math.min(n[t][0],e)}),0),o=Object.keys(n).reduce((function(e,t){return Math.min(n[t][1],e)}),0);return Object.keys(n).map((function(e,t){return n[e]=[n[e][0]-c,n[e][1]-o],n})),Object(re.a)(Object(re.a)({},t.payload.state),{},{positions:n});case"updateId":return Object(re.a)(Object(re.a)({},e),{},{activeId:t.payload.id});case"updateText":return Object(re.a)(Object(re.a)({},e),{},{txts:Object(re.a)(Object(re.a)({},e.txts),{},Object(oe.a)({},t.payload.id,t.payload.txt)),splits:Object(re.a)(Object(re.a)({},e.splits),{},Object(oe.a)({},t.payload.id,t.payload.split)),selections:Object(re.a)(Object(re.a)({},e.selections),{},Object(oe.a)({},t.payload.id,t.payload.selection))});case"updateSelection":return Object(re.a)(Object(re.a)({},e),{},{activeId:t.payload.id,splits:Object(re.a)(Object(re.a)({},e.splits),{},Object(oe.a)({},t.payload.id,t.payload.split)),selections:Object(re.a)(Object(re.a)({},e.selections),{},Object(oe.a)({},t.payload.id,t.payload.selection))});case"splitText":var r=function(){var n,c,o=t.payload.id,r=e.order.indexOf(o),a=Object(ne.c)(),s=e.splits[o].slice1,i=e.splits[o].slice2,l=Object(ce.a)(e.order);l.splice(r+1,0,a);for(var d=Object(N.convertFromRaw)(JSON.parse(s)).getPlainText().length,b=Object(N.convertFromRaw)(JSON.parse(i)).getPlainText().length,u=document.getElementsByClassName("node").namedItem(o).clientHeight*d/(d+b+.01),j=e.positions[o],O=[j[0],j[1]+u+50],p=Object.values(e.positions),f=0;p.filter((function(e){return JSON.stringify(e)===JSON.stringify(O)})).length>0&&(f+=1,O[0]+=15,O[1]+=15,!(f>5)););return{v:Object(re.a)(Object(re.a)({},e),{},{activeId:a,order:l,txts:Object(re.a)(Object(re.a)({},e.txts),{},(n={},Object(oe.a)(n,o,s),Object(oe.a)(n,a,i),n)),splits:Object(re.a)(Object(re.a)({},e.splits),{},(c={},Object(oe.a)(c,o,{slice1:s,slice2:s}),Object(oe.a)(c,a,{slice1:i,slice2:i}),c)),notes:Object(re.a)(Object(re.a)({},e.notes),{},Object(oe.a)({},a,"")),views:Object(re.a)(Object(re.a)({},e.views),{},Object(oe.a)({},a,!1)),positions:Object(re.a)(Object(re.a)({},e.positions),{},Object(oe.a)({},a,O))})}}();if("object"===typeof r)return r.v;case"mergeText":var a=t.payload.id,s=e.order.indexOf(a);if(0===s)return e;var i=e.order[s-1],l=Object(ce.a)(e.order);l.splice(s,1);var d=e.graph.connections.map((function(e){return e.map((function(e){return e===a?i:e}))})).filter((function(e){return e[0]!==e[1]})),b=new Set(d.map((function(e){return e.join()})));d=Object(ce.a)(b).map((function(e){return e.split(",")}));var u=Object(N.convertFromRaw)(JSON.parse(e.txts[i])),j=Object(N.convertFromRaw)(JSON.parse(e.txts[a])),O=N.EditorState.createWithContent(j).getSelection(),p=O.getAnchorKey(),f=N.SelectionState.createEmpty("blockkey").merge({anchorKey:p,anchorOffset:0,focusKey:p,focusOffset:0}),y=N.Modifier.replaceWithFragment(j,f,u.getBlockMap());return Object(re.a)(Object(re.a)({},e),{},{activeId:i,order:l,txts:Object(re.a)(Object(re.a)({},e.txts),{},Object(oe.a)({},i,JSON.stringify(Object(N.convertToRaw)(y)))),splits:Object(re.a)(Object(re.a)({},e.splits),{},Object(oe.a)({},i,{slice1:0,slice2:0})),notes:Object(re.a)(Object(re.a)({},e.notes),{},Object(oe.a)({},i,e.notes[i]+e.notes[a])),graph:Object(re.a)(Object(re.a)({},e.graph),{},{connections:d})});case"toggleNote":var g=t.payload.id;return Object(re.a)(Object(re.a)({},e),{},{views:Object(re.a)(Object(re.a)({},e.views),{},Object(oe.a)({},g,!e.views[g]))});case"updateNote":var h=t.payload.id,m=document.activeElement;return Object(re.a)(Object(re.a)({},e),{},{notes:Object(re.a)(Object(re.a)({},e.notes),{},Object(oe.a)({},h,m.value))});case"updatePosition":var v=t.payload,x=v.id,S=v.x,C=v.y;return Object(re.a)(Object(re.a)({},e),{},{positions:Object(re.a)(Object(re.a)({},e.positions),{},Object(oe.a)({},x,[S,C]))});case"setMode":return Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{mode:t.payload.label,selectedNode:t.payload.id})});case"resetMode":return Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{mode:null,selectedNode:null}),mode:"",id:null});case"setBox":var A=t.payload,k=A.label,w=A.id;return Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{boxes:Object(re.a)(Object(re.a)({},e.graph.boxes),{},Object(oe.a)({},w,k))})});case"removeBox":var E=t.payload.id,T=Object(re.a)({},e.graph.boxes);return delete T[E],Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{boxes:Object(re.a)({},T)})});case"addConnection":return e.graph.connections.filter((function(e){return e.toString()===t.payload.connection.toString()})).length>0&&e.graph.connections.length>0?e:Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{connections:[].concat(Object(ce.a)(e.graph.connections),[t.payload.connection])})});case"deleteConnection":var M=e.graph.connections.filter((function(e){return e[0]+e[1]+e[2]!==t.payload.id}));return Object(re.a)(Object(re.a)({},e),{},{graph:Object(re.a)(Object(re.a)({},e.graph),{},{connections:M})});default:return e}}),{filter:Object(_.excludeAction)(["updateId","updateCaret","updatePosition","toggleNote","updateNote","resetMode","setMode","updateSelection"])}),args:le}});r.a.render(Object(i.jsx)(a.a,{store:de,children:Object(i.jsx)(ee,{})}),document.getElementById("root")),te()},51:function(e,t,n){}},[[234,1,2]]]);
//# sourceMappingURL=main.f59d1d71.chunk.js.map